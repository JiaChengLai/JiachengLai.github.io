<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="Zh-Hans">
<head>
  <meta charset="UTF-8"/>

<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误');
                history.back();
            }
        }
    })();
</script>

<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Oracle," />










<meta name="description" content="SQL语句类型三种SQL语句类型1、DML（Data Manipulation Language 数据操作语言）:select insert update delete2、DDL(Data Definition Language 数据定义语言): create/alter/truncate/drop table(表),create/drop view(视图),sequence(序列),index(">
<meta name="keywords" content="Oracle">
<meta property="og:type" content="article">
<meta property="og:title" content="Oracle(4)DML、DDL、事务">
<meta property="og:url" content="http://yoursite.com/2018/07/11/Oracle(4)DML、DDL、事务/index.html">
<meta property="og:site_name" content="晨">
<meta property="og:description" content="SQL语句类型三种SQL语句类型1、DML（Data Manipulation Language 数据操作语言）:select insert update delete2、DDL(Data Definition Language 数据定义语言): create/alter/truncate/drop table(表),create/drop view(视图),sequence(序列),index(">
<meta property="og:locale" content="Zh-Hans">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/46308434.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/22911999.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/5042163.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/77383536.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/45836047.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/90857460.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/94005078.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/71908794.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/44106610.jpg">
<meta property="og:updated_time" content="2019-02-18T07:19:54.578Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Oracle(4)DML、DDL、事务">
<meta name="twitter:description" content="SQL语句类型三种SQL语句类型1、DML（Data Manipulation Language 数据操作语言）:select insert update delete2、DDL(Data Definition Language 数据定义语言): create/alter/truncate/drop table(表),create/drop view(视图),sequence(序列),index(">
<meta name="twitter:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/46308434.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/07/11/Oracle(4)DML、DDL、事务/"/>





  <title>Oracle(4)DML、DDL、事务 | 晨</title>
  








</head>

<!--卖萌-->
<script type="text/javascript" src="/js/src/mytitle.js"></script>

<body itemscope itemtype="http://schema.org/WebPage" lang="Zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">晨</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学无止境</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/11/Oracle(4)DML、DDL、事务/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiachengLai">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="晨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Oracle(4)DML、DDL、事务</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-11T15:34:52+08:00">
                2018-07-11
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Oracle/" itemprop="url" rel="index">
                    <span itemprop="name">Oracle</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="SQL语句类型"><a href="#SQL语句类型" class="headerlink" title="SQL语句类型"></a>SQL语句类型</h1><h2 id="三种SQL语句类型"><a href="#三种SQL语句类型" class="headerlink" title="三种SQL语句类型"></a>三种SQL语句类型</h2><p>1、DML（Data Manipulation Language 数据操作语言）:select insert update delete<br>2、DDL(Data Definition Language 数据定义语言): create/alter/truncate/drop table(表),create/drop view(视图),sequence(序列),index(索引),synonym(同义词)<br>3、DCL(Data Control Language 数据控制语言): grant(授权) revoke(撤销权限)</p>
<h2 id="数据操作语言DML"><a href="#数据操作语言DML" class="headerlink" title="数据操作语言DML"></a>数据操作语言<code>DML</code></h2><h3 id="插入insert"><a href="#插入insert" class="headerlink" title="插入insert"></a>插入<code>insert</code></h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; insert into emp(empno,ename,sal,deptno) values(1002,&apos;TOM&apos;,3000,10);</span><br><span class="line"></span><br><span class="line">已创建 1 行。</span><br></pre></td></tr></table></figure>
<h4 id="使用地址符-amp-完成数据批量插入"><a href="#使用地址符-amp-完成数据批量插入" class="headerlink" title="使用地址符&amp;完成数据批量插入"></a>使用地址符<code>&amp;</code>完成数据批量插入</h4><p><strong>类似<code>PreparedStatement pst = &quot;insert into emp(empno,ename,sal,deptno) values(?,?,?,?)&quot;</code>的插入数据方式</strong></p>
<a id="more"></a>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --地址符 &amp;</span><br><span class="line">SQL&gt; insert into emp(empno,ename,sal,deptno) values(&amp;empno,&amp;ename,&amp;sal,&amp;deptno);</span><br><span class="line">输入 empno 的值:  1003</span><br><span class="line">输入 ename 的值:  &apos;jack&apos;</span><br><span class="line">输入 sal 的值:  3000</span><br><span class="line">输入 deptno 的值:  20</span><br><span class="line">原值    1: insert into emp(empno,ename,sal,deptno) values(&amp;empno,&amp;ename,&amp;sal,&amp;deptno)</span><br><span class="line">新值    1: insert into emp(empno,ename,sal,deptno) values(1003,&apos;jack&apos;,3000,20)</span><br><span class="line"></span><br><span class="line">已创建 1 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; -- 再输入/ 重复上条语句可以完成插入多条数据的操作</span><br><span class="line">SQL&gt; /</span><br><span class="line">输入 empno 的值:  1004</span><br><span class="line">输入 ename 的值:  &apos;lisi&apos;</span><br><span class="line">输入 sal 的值:  4000</span><br><span class="line">输入 deptno 的值:  10</span><br><span class="line">原值    1: insert into emp(empno,ename,sal,deptno) values(&amp;empno,&amp;ename,&amp;sal,&amp;deptno)</span><br><span class="line">新值    1: insert into emp(empno,ename,sal,deptno) values(1005,&apos;lisi&apos;,4000,10)</span><br><span class="line"></span><br><span class="line">已创建 1 行。</span><br></pre></td></tr></table></figure>
<h4 id="使用子查询完成数据批量插入"><a href="#使用子查询完成数据批量插入" class="headerlink" title="使用子查询完成数据批量插入"></a>使用子查询完成数据批量插入</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --利用子查询创建和emp表表结构相同的表</span><br><span class="line">SQL&gt; --where 1=2永远不等  来达到创建表时只复制emp的表结构不复制emp中的数据</span><br><span class="line">SQL&gt; create table emp10 as select * from emp where 1=2;</span><br><span class="line"></span><br><span class="line">表已创建。</span><br><span class="line"></span><br><span class="line">SQL&gt; --一次性将emp中，所有10号部门的员工插入到emp10中</span><br><span class="line">SQL&gt; insert into emp10 select * from emp where deptno=10;</span><br><span class="line"></span><br><span class="line">已创建 3 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from emp10;</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME      JOB              MGR HIREDATE              SAL       COMM     DEPTNO</span><br><span class="line">---------- ---------- --------- ---------- -------------- ---------- ---------- ----------</span><br><span class="line">      7782 CLARK      MANAGER         7839 09-6月 -81           2450                    10</span><br><span class="line">      7839 KING       PRESIDENT            17-11月-81           5000                    10</span><br><span class="line">      7934 MILLER     CLERK           7782 23-1月 -82           1300                    10</span><br></pre></td></tr></table></figure>
<h4 id="其它批量插入数据的方式"><a href="#其它批量插入数据的方式" class="headerlink" title="其它批量插入数据的方式"></a>其它批量插入数据的方式</h4><p>1、PLSQL中的数据泵 dbms_datapump(程序包)<br>2、SQL*Loader<br>3、外部表</p>
<h3 id="查询select"><a href="#查询select" class="headerlink" title="查询select"></a>查询<code>select</code></h3><p><strong>利用地址符<code>&amp;</code>完成<code>select</code>操作</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select empno,ename,sal,&amp;t</span><br><span class="line">  2  from emp;</span><br><span class="line">输入 t 的值:  job</span><br><span class="line">原值    1: select empno,ename,sal,&amp;t</span><br><span class="line">新值    1: select empno,ename,sal,job</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME             SAL JOB</span><br><span class="line">---------- ---------- ---------- ---------</span><br><span class="line">      1002 TOM              3000</span><br><span class="line">      1001 Tom_AB           3000</span><br><span class="line">      1004 zhangsan         4000</span><br><span class="line">      1005 lisi             4000</span><br><span class="line">      7369 SMITH             800 CLERK</span><br><span class="line">      7499 ALLEN            1600 SALESMAN</span><br><span class="line">      7521 WARD             1250 SALESMAN</span><br><span class="line">      7566 JONES            2975 MANAGER</span><br><span class="line">      7654 MARTIN           1250 SALESMAN</span><br><span class="line">      7698 BLAKE            2850 MANAGER</span><br><span class="line">      7782 CLARK            2450 MANAGER</span><br><span class="line">      7788 SCOTT            3000 ANALYST</span><br><span class="line">      7839 KING             5000 PRESIDENT</span><br><span class="line">      7844 TURNER           1500 SALESMAN</span><br><span class="line">      7876 ADAMS            1100 CLERK</span><br><span class="line">      7900 JAMES             950 CLERK</span><br><span class="line">      7902 FORD             3000 ANALYST</span><br><span class="line">      7934 MILLER           1300 CLERK</span><br><span class="line"></span><br><span class="line">已选择 18 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; /</span><br><span class="line">输入 t 的值:  comm</span><br><span class="line">原值    1: select empno,ename,sal,&amp;t</span><br><span class="line">新值    1: select empno,ename,sal,comm</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME             SAL       COMM</span><br><span class="line">---------- ---------- ---------- ----------</span><br><span class="line">      1002 TOM              3000</span><br><span class="line">      1001 Tom_AB           3000</span><br><span class="line">      1004 zhangsan         4000</span><br><span class="line">      1005 lisi             4000</span><br><span class="line">      7369 SMITH             800</span><br><span class="line">      7499 ALLEN            1600        300</span><br><span class="line">      7521 WARD             1250        500</span><br><span class="line">      7566 JONES            2975</span><br><span class="line">      7654 MARTIN           1250       1400</span><br><span class="line">      7698 BLAKE            2850</span><br><span class="line">      7782 CLARK            2450</span><br><span class="line">      7788 SCOTT            3000</span><br><span class="line">      7839 KING             5000</span><br><span class="line">      7844 TURNER           1500          0</span><br><span class="line">      7876 ADAMS            1100</span><br><span class="line">      7900 JAMES             950</span><br><span class="line">      7902 FORD             3000</span><br><span class="line">      7934 MILLER           1300</span><br><span class="line"></span><br><span class="line">已选择 18 行。</span><br></pre></td></tr></table></figure></p>
<h3 id="删除delete"><a href="#删除delete" class="headerlink" title="删除delete"></a>删除<code>delete</code></h3><h4 id="利用地址符-amp-完成删除操作"><a href="#利用地址符-amp-完成删除操作" class="headerlink" title="利用地址符&amp;完成删除操作"></a>利用地址符<code>&amp;</code>完成删除操作</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; delete from emp where empno in(1001,1002,1003,1004);</span><br><span class="line"></span><br><span class="line">已删除 4 行。</span><br></pre></td></tr></table></figure>
<p><strong>利用地址符<code>&amp;</code>完成<code>delete</code>操作</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; delete from emp where empno=&amp;e;</span><br><span class="line">输入 e 的值:  1001</span><br><span class="line">原值    1: delete from emp where empno=&amp;e</span><br><span class="line">新值    1: delete from emp where empno=1001</span><br><span class="line"></span><br><span class="line">已删除 1 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; /</span><br><span class="line">输入 e 的值:  1002</span><br><span class="line">原值    1: delete from emp where empno=&amp;</span><br><span class="line">新值    1: delete from emp where empno=1002</span><br><span class="line"></span><br><span class="line">已删除 1 行。</span><br></pre></td></tr></table></figure></p>
<h4 id="delete和truncate的区别"><a href="#delete和truncate的区别" class="headerlink" title="delete和truncate的区别"></a><code>delete</code>和<code>truncate</code>的区别</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">delete和truncate的区别</span><br><span class="line">delete                      truncate</span><br><span class="line">delete逐条删除；             truncate先摧毁表 再重建表</span><br><span class="line">delete是DML(可以回滚)        truncate是DDL（不可以回滚）</span><br><span class="line">delete不会释放空间           truncate会</span><br><span class="line">delete会产生碎片             truncate不会</span><br><span class="line">delete可以闪回(flashback)    truncate不可以</span><br></pre></td></tr></table></figure>
<h4 id="表碎片"><a href="#表碎片" class="headerlink" title="表碎片"></a>表碎片</h4><p>当针对一个表的删除操作很多时，表会产生大量碎片。删除操作释放的空间不会被插入操作立即重用，甚至永远也不会被重用。</p>
<h5 id="delete-产生表碎片的原因"><a href="#delete-产生表碎片的原因" class="headerlink" title="delete 产生表碎片的原因"></a><code>delete</code> 产生表碎片的原因</h5><p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/46308434.jpg" alt=""><br>如图，表中插入了3条数据，高水位线的位置就是下次insert的位置，当删除第二条记录时，高水位线的位置并不会发生改变，下次插入数据的位置也依旧是在高水位线的位置，碎片便因此产生了。</p>
<h5 id="为什么要整理表碎片"><a href="#为什么要整理表碎片" class="headerlink" title="为什么要整理表碎片"></a>为什么要整理表碎片</h5><p>Oracle 对数据段的管理有一个高水位(HWM, High Water Mark)的概念。高水位是数据段中使用过和未使用过的数据块的分界线。高水位以下的数据块是曾使用过的，以上的是从未被使用或初始化过的。<br>当 Oracle 进行全表扫描(FTS, Full table scan)的操作时，它会读高水位下的所有数据块。如果高水位下还有很多空闲空间（碎片），读取这些空闲数据块会降低操作的性能。</p>
<h5 id="表碎片导致的问题"><a href="#表碎片导致的问题" class="headerlink" title="表碎片导致的问题"></a>表碎片导致的问题</h5><p>1、查询响应时间(尤其是全表扫描)变慢<br>2、产生大量行迁移<br>3、浪费空间</p>
<h5 id="表碎片的清除"><a href="#表碎片的清除" class="headerlink" title="表碎片的清除"></a>表碎片的清除</h5><p>1、alter table &lt;表名称&gt; move;<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; alter table emp move;</span><br><span class="line"></span><br><span class="line">表已更改。</span><br></pre></td></tr></table></figure></p>
<p>2、将表中数据导出再重新导入即可</p>
<h3 id="更新update"><a href="#更新update" class="headerlink" title="更新update"></a>更新<code>update</code></h3><p><strong>利用地址符<code>&amp;</code>完成<code>update</code>操作</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; update emp set sal=&amp;a where empno=&amp;b;</span><br><span class="line">输入 a 的值:  2000</span><br><span class="line">输入 b 的值:  1001</span><br><span class="line">原值    1: update emp set sal=&amp;a where empno=&amp;b</span><br><span class="line">新值    1: update emp set sal=2000 where empno=1001</span><br><span class="line"></span><br><span class="line">已更新 1 行。</span><br></pre></td></tr></table></figure></p>
<h2 id="数据定义语言DDL"><a href="#数据定义语言DDL" class="headerlink" title="数据定义语言DDL"></a>数据定义语言<code>DDL</code></h2><h3 id="常见的数据库对象"><a href="#常见的数据库对象" class="headerlink" title="常见的数据库对象"></a>常见的数据库对象</h3><p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/22911999.jpg" alt=""></p>
<h3 id="创建表空间"><a href="#创建表空间" class="headerlink" title="创建表空间"></a>创建表空间</h3><p>表空间是Oracle数据库的逻辑单元，一个表空间可以与多个数据文件(物理结构)关联，一个数据库下可以建立多个表空间，一个表空间可以建立多个用户，一个用户下可以建立多个表。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create tablespace test001</span><br><span class="line">datafile &apos;d:\test001.dbf&apos;</span><br><span class="line">size 100m</span><br><span class="line">autoextend on</span><br><span class="line">next 10m</span><br></pre></td></tr></table></figure></p>
<p>test001 为表空间名称<br>datafile 指定表空间对应的数据文件<br>size 指定表空间的初始大小<br>autoextend on 当表空间存储都占满时，自动增长<br>next 指定一次自动增长的大小</p>
<h3 id="用户"><a href="#用户" class="headerlink" title="用户"></a>用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">create user test_user</span><br><span class="line">identified by password</span><br><span class="line">default tablespace test001</span><br></pre></td></tr></table></figure>
<p>identified by 后边的是用户密码<br>default tablespace 后面的是表空间结构</p>
<p><strong>Oracle与其它数据库的区别</strong><br>Oracle的表和其它数据库对象都是存储在用户下的</p>
<h3 id="创建表"><a href="#创建表" class="headerlink" title="创建表"></a>创建表</h3><h4 id="表中的数据类型"><a href="#表中的数据类型" class="headerlink" title="表中的数据类型"></a>表中的数据类型</h4><p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/5042163.jpg" alt=""><br><strong>ROWID</strong><br><code>ROWID</code>表行地址，是一个伪列，我们可以通过行地址精确的找到每一行数据。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select rowid,ename from emp;</span><br><span class="line"></span><br><span class="line">ROWID              ENAME</span><br><span class="line">------------------ ----------</span><br><span class="line">AAAM2QAAEAAAAG0AAA SMITH</span><br><span class="line">AAAM2QAAEAAAAG0AAB ALLEN</span><br><span class="line">AAAM2QAAEAAAAG0AAC WARD</span><br><span class="line">AAAM2QAAEAAAAG0AAD JONES</span><br><span class="line">AAAM2QAAEAAAAG0AAE MARTIN</span><br><span class="line">AAAM2QAAEAAAAG0AAF BLAKE</span><br><span class="line">AAAM2QAAEAAAAG0AAG CLARK</span><br><span class="line">AAAM2QAAEAAAAG0AAH SCOTT</span><br><span class="line">AAAM2QAAEAAAAG0AAI KING</span><br><span class="line">AAAM2QAAEAAAAG0AAJ TURNER</span><br><span class="line">AAAM2QAAEAAAAG0AAK ADAMS</span><br><span class="line">AAAM2QAAEAAAAG0AAL JAMES</span><br><span class="line">AAAM2QAAEAAAAG0AAM FORD</span><br><span class="line">AAAM2QAAEAAAAG0AAN MILLER</span><br><span class="line"></span><br><span class="line">已选择 14 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from emp where rowid=&apos;AAAM2QAAEAAAAG0AAE&apos;;</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME      JOB              MGR HIREDATE              SAL       COMM     DEPTNO</span><br><span class="line">---------- ---------- --------- ---------- -------------- ---------- ---------- ----------</span><br><span class="line">      7654 MARTIN     SALESMAN        7698 28-9月 -81           1250       1400         30</span><br></pre></td></tr></table></figure></p>
<h4 id="普通的建表方式"><a href="#普通的建表方式" class="headerlink" title="普通的建表方式"></a>普通的建表方式</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create table test1(</span><br><span class="line">  2  tid number,</span><br><span class="line">  3  tname varchar2(20)</span><br><span class="line">  4  );</span><br></pre></td></tr></table></figure>
<h4 id="利用子查询创建表"><a href="#利用子查询创建表" class="headerlink" title="利用子查询创建表"></a>利用子查询创建表</h4><p><strong>创建表时，创建表结构，同时导入数据</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create table emp20</span><br><span class="line">  2  as</span><br><span class="line">  3  select * from emp where deptno=20;</span><br><span class="line"></span><br><span class="line">表已创建。</span><br><span class="line"></span><br><span class="line">SQL&gt; desc emp20</span><br><span class="line"> 名称</span><br><span class="line">                                                                       是否为空? 类型</span><br><span class="line"> ----------------------------------------------------------------------------------------------------</span><br><span class="line"> EMPNO</span><br><span class="line">                                                                                NUMBER(4)</span><br><span class="line"> ENAME</span><br><span class="line">                                                                                VARCHAR2(10)</span><br><span class="line"> JOB</span><br><span class="line">                                                                                VARCHAR2(9)</span><br><span class="line"> MGR</span><br><span class="line">                                                                                NUMBER(4)</span><br><span class="line"> HIREDATE</span><br><span class="line">                                                                                DATE</span><br><span class="line"> SAL</span><br><span class="line">                                                                                NUMBER(7,2)</span><br><span class="line"> COMM</span><br><span class="line">                                                                                NUMBER(7,2)</span><br><span class="line"> DEPTNO</span><br><span class="line">                                                                                NUMBER(2)</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from emp20;</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME      JOB              MGR HIREDATE              SAL       COMM     DEPTNO</span><br><span class="line">---------- ---------- --------- ---------- -------------- ---------- ---------- ----------</span><br><span class="line">      7369 SMITH      CLERK           7902 17-12月-80            800                    20</span><br><span class="line">      7566 JONES      MANAGER         7839 02-4月 -81           2975                    20</span><br><span class="line">      7788 SCOTT      ANALYST         7566 19-4月 -87           3000                    20</span><br><span class="line">      7876 ADAMS      CLERK           7788 23-5月 -87           1100                    20</span><br><span class="line">      7902 FORD       ANALYST         7566 03-12月-81           3000                    20</span><br></pre></td></tr></table></figure></p>
<p><strong>创建表时，创建表结构，不导入数据</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; 建表时 给子查询一个为假的筛选条件 就没有数据符合条件 所以只会创建表结构</span><br><span class="line">SQL&gt; create table emp30</span><br><span class="line">  2  as</span><br><span class="line">  3  select * from emp where 1=2;</span><br><span class="line"></span><br><span class="line">表已创建。</span><br><span class="line"></span><br><span class="line">SQL&gt; desc emp30;</span><br><span class="line"> 名称</span><br><span class="line">                                                                       是否为空? 类型</span><br><span class="line"> ---------------------------------------------------------------------------------------------------</span><br><span class="line"> EMPNO</span><br><span class="line">                                                                                NUMBER(4)</span><br><span class="line"> ENAME</span><br><span class="line">                                                                                VARCHAR2(10)</span><br><span class="line"> JOB</span><br><span class="line">                                                                                VARCHAR2(9)</span><br><span class="line"> MGR</span><br><span class="line">                                                                                NUMBER(4)</span><br><span class="line"> HIREDATE</span><br><span class="line">                                                                                DATE</span><br><span class="line"> SAL</span><br><span class="line">                                                                                NUMBER(7,2)</span><br><span class="line"> COMM</span><br><span class="line">                                                                                NUMBER(7,2)</span><br><span class="line"> DEPTNO</span><br><span class="line">                                                                                NUMBER(2)</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from emp30;</span><br><span class="line"></span><br><span class="line">未选定行</span><br></pre></td></tr></table></figure></p>
<h3 id="修改表"><a href="#修改表" class="headerlink" title="修改表"></a>修改表</h3><h4 id="增加新列"><a href="#增加新列" class="headerlink" title="增加新列"></a>增加新列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; desc test1;</span><br><span class="line"> 名称                                      是否为空? 类型</span><br><span class="line"> ----------------------------------------- -------- ----------------------------</span><br><span class="line"> TID                                                NUMBER</span><br><span class="line"> TNAME                                              VARCHAR2(20)</span><br><span class="line"></span><br><span class="line">SQL&gt; alter table test1 add photo blob;</span><br><span class="line"></span><br><span class="line">表已更改。</span><br><span class="line"></span><br><span class="line">SQL&gt; desc test1;</span><br><span class="line"> 名称                                      是否为空? 类型</span><br><span class="line"> ----------------------------------------- -------- ----------------------------</span><br><span class="line"> TID                                                NUMBER</span><br><span class="line"> TNAME                                              VARCHAR2(20)</span><br><span class="line"> PHOTO                                              BLOB</span><br></pre></td></tr></table></figure>
<h4 id="修改列行列"><a href="#修改列行列" class="headerlink" title="修改列行列"></a>修改列行列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; desc test1;</span><br><span class="line"> 名称                                      是否为空? 类型</span><br><span class="line"> ----------------------------------------- -------- ----------------------------</span><br><span class="line"> TID                                                NUMBER</span><br><span class="line"> TNAME                                              VARCHAR2(20)</span><br><span class="line"> PHOTO                                              BLOB</span><br><span class="line"></span><br><span class="line">SQL&gt; alter table test1 modify tname varchar(40);</span><br><span class="line"></span><br><span class="line">表已更改。</span><br><span class="line"></span><br><span class="line">SQL&gt; desc test1;</span><br><span class="line"> 名称                                      是否为空? 类型</span><br><span class="line"> ----------------------------------------- -------- ----------------------------</span><br><span class="line"> TID                                                NUMBER</span><br><span class="line"> TNAME                                              VARCHAR2(40)</span><br><span class="line"> PHOTO                                              BLOB</span><br></pre></td></tr></table></figure>
<h4 id="删除列"><a href="#删除列" class="headerlink" title="删除列"></a>删除列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; desc test1;</span><br><span class="line"> 名称                                      是否为空? 类型</span><br><span class="line"> ----------------------------------------- -------- ----------------------------</span><br><span class="line"> TID                                                NUMBER</span><br><span class="line"> TNAME                                              VARCHAR2(40)</span><br><span class="line"> PHOTO                                              BLOB</span><br><span class="line"></span><br><span class="line">SQL&gt; alter table test1 drop column photo;</span><br><span class="line"></span><br><span class="line">表已更改。</span><br><span class="line"></span><br><span class="line">SQL&gt; desc test1;</span><br><span class="line"> 名称                                      是否为空? 类型</span><br><span class="line"> ----------------------------------------- -------- ----------------------------</span><br><span class="line"> TID                                                NUMBER</span><br><span class="line"> TNAME                                              VARCHAR2(40)</span><br></pre></td></tr></table></figure>
<h4 id="重命名列"><a href="#重命名列" class="headerlink" title="重命名列"></a>重命名列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; desc test1;</span><br><span class="line"> 名称                                      是否为空? 类型</span><br><span class="line"> ----------------------------------------- -------- ----------------------------</span><br><span class="line"> TID                                                NUMBER</span><br><span class="line"> TNAME                                              VARCHAR2(40)</span><br><span class="line"></span><br><span class="line">SQL&gt; alter table test1 rename column tname to username;</span><br><span class="line"></span><br><span class="line">表已更改。</span><br><span class="line"></span><br><span class="line">SQL&gt; desc test1;</span><br><span class="line"> 名称                                      是否为空? 类型</span><br><span class="line"> ----------------------------------------- -------- ----------------------------</span><br><span class="line"> TID                                                NUMBER</span><br><span class="line"> USERNAME                                           VARCHAR2(40)</span><br></pre></td></tr></table></figure>
<h3 id="删除表"><a href="#删除表" class="headerlink" title="删除表"></a>删除表</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select * from tab;</span><br><span class="line"></span><br><span class="line">TNAME                          TABTYPE  CLUSTERID</span><br><span class="line">------------------------------ ------- ----------</span><br><span class="line">DEPT                           TABLE</span><br><span class="line">EMP                            TABLE</span><br><span class="line">BONUS                          TABLE</span><br><span class="line">SALGRADE                       TABLE</span><br><span class="line">TEST1                          TABLE</span><br><span class="line"></span><br><span class="line">SQL&gt; drop table test1;</span><br><span class="line"></span><br><span class="line">表已删除。</span><br></pre></td></tr></table></figure>
<h3 id="回收站（recyclebin）"><a href="#回收站（recyclebin）" class="headerlink" title="回收站（recyclebin）"></a>回收站（<code>recyclebin</code>）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select * from tab;</span><br><span class="line"></span><br><span class="line">TNAME                          TABTYPE  CLUSTERID</span><br><span class="line">------------------------------ ------- ----------</span><br><span class="line">DEPT                           TABLE</span><br><span class="line">EMP                            TABLE</span><br><span class="line">BONUS                          TABLE</span><br><span class="line">SALGRADE                       TABLE</span><br><span class="line">BIN$KwoTmz29RzCYTkLaR2du6g==$0 TABLE</span><br></pre></td></tr></table></figure>
<p>可以发现，表被删除后，再查看所有表，发现被删除的表的名称变成了一堆乱码，那这堆乱码是什么呢。答案是 是原表被删除后在Oracle回收站(recyclebin)中的名称。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; show recyclebin;</span><br><span class="line">ORIGINAL NAME    RECYCLEBIN NAME                OBJECT TYPE  DROP TIME</span><br><span class="line">---------------- ------------------------------ ------------ -------------------</span><br><span class="line">TEST1            BIN$KwoTmz29RzCYTkLaR2du6g==$0 TABLE        2018-07-11:02:03:18</span><br><span class="line"></span><br><span class="line">SQL&gt; --查看回收站内的表</span><br><span class="line">SQL&gt; --desc &quot;BIN$KwoTmz29RzCYTkLaR2du6g==$0&quot;;</span><br><span class="line"> 名称                                      是否为空? 类型</span><br><span class="line"> ----------------------------------------- -------- ----------------------------</span><br><span class="line"> TID                                                NUMBER</span><br><span class="line"> USERNAME                                           VARCHAR2(40)</span><br><span class="line"></span><br><span class="line">SQL&gt; 将被删除的表从回收站恢复出来</span><br><span class="line">SQL&gt; flashback table test1 to before drop;</span><br><span class="line"></span><br><span class="line">闪回完成。</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from tab;</span><br><span class="line"></span><br><span class="line">TNAME                          TABTYPE  CLUSTERID</span><br><span class="line">------------------------------ ------- ----------</span><br><span class="line">DEPT                           TABLE</span><br><span class="line">EMP                            TABLE</span><br><span class="line">BONUS                          TABLE</span><br><span class="line">SALGRADE                       TABLE</span><br><span class="line">TEST1                          TABLE</span><br><span class="line"></span><br><span class="line">SQL&gt; --清空回收站</span><br><span class="line">SQL&gt; purge recyclebin;</span><br></pre></td></tr></table></figure></p>
<p><strong>注意：管理员没有回收站</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --查看当前用户</span><br><span class="line">SQL&gt; show user</span><br><span class="line">USER 为 &quot;SCOTT&quot;</span><br></pre></td></tr></table></figure></p>
<h3 id="约束"><a href="#约束" class="headerlink" title="约束"></a>约束</h3><h4 id="主键约束（PRIMARY-KEY"><a href="#主键约束（PRIMARY-KEY" class="headerlink" title="主键约束（PRIMARY KEY)"></a>主键约束（PRIMARY KEY)</h4><p>主键是定位表中单个行的方式，可唯一确定表中的某一行，关系型数据库要求所有表都应该有主键，不过Oracle没有遵循此范例要求，Oracle中的表可以没有主键（这种情况不多见）。关于主键有几个需要注意的点：<br>1、键列必须必须具有唯一性，且不能为空，其实主键约束 相当于 UNIQUE+NOT NULL<br>2、一个表只允许有一个主键<br>3、主键所在列必须具有索引（主键的唯一约束通过索引来实现），如果不存在，将会在索引添加的时候自动创建</p>
<p>添加主键（约束的添加可在建表时创建，也可如下所示在建表后添加，一般推荐建表后添加，灵活度更高一些，建表时添加某些约束会有限制）<br><code>SQL&gt; alter table emp add constraint emp_id_pk primary key(id);</code></p>
<h4 id="唯一性约束（UNIQUE"><a href="#唯一性约束（UNIQUE" class="headerlink" title="唯一性约束（UNIQUE)"></a>唯一性约束（UNIQUE)</h4><p>唯一性约束可作用在单列或多列上，对于这些列或列组合，唯一性约束保证每一行的唯一性。<br>UNIQUE需要注意：<br>1、对于UNIQUE约束来讲，索引是必须的。如果不存在，就自动创建一个（UNIQUE的唯一性本质上是通过索引来保证的）<br>2、UNIQUE允许null值，UNIQUE约束的列可存在多个null。这是因为，Unique唯一性通过btree索引来实现，而btree索引中不包含null。当然，这也造成了在where语句中用null值进行过滤会造成全表扫描。</p>
<p>添加唯一约束<br><code>SQL&gt; alter table emp add constraint emp_code_uq unique(code);</code></p>
<h4 id="非空约束（NOT-NULL"><a href="#非空约束（NOT-NULL" class="headerlink" title="非空约束（NOT NULL)"></a>非空约束（NOT NULL)</h4><p>非空约束作用的列也叫强制列。顾名思义，强制键列中必须有值，当然建表时候若使用default关键字指定了默认值，则可不输入。</p>
<p>添加非空约束，语法较特别<br><code>SQL&gt; alter table emp modify ename not null;</code></p>
<h4 id="外键约束（FOREIGN-KEY）"><a href="#外键约束（FOREIGN-KEY）" class="headerlink" title="外键约束（FOREIGN KEY）"></a>外键约束（FOREIGN KEY）</h4><p>外键约束定义在具有父子关系的子表中，外键约束使得子表中的列对应父表的主键列，用以维护数据库的完整性。不过出于性能和后期的业务系统的扩展的考虑，很多时候，外键约束仅出现在数据库的设计中，实际会放在业务程序中进行处理。外键约束注意以下几点：<br>1、外键约束的子表中的列和对应父表中的列数据类型必须相同，列名可以不同<br>2、对应的父表列必须存在主键约束（PRIMARY KEY）或唯一约束（UNIQUE）<br>3、外键约束列允许NULL值，对应的行就成了孤行了</p>
<p>其实很多时候不使用外键，很多人认为会让删除操作比较麻烦，比如要删除父表中的某条数据，但某个子表中又有对该条数据的引用，这时就会导致删除失败。我们有两种方式来优化这种场景：</p>
<p><strong>第一种方式</strong>(过于粗暴，容易误删数据)简单粗暴，删除的时候，级联删除掉子表中的所有匹配行，在创建外键时，通过 on delete cascade 子句指定该外键列可级联删除：<br><code>SQL&gt; alter table emp add constraint emp_deptno_fk foreign key(deptno) references dept (deptno) on delete cascade;</code></p>
<p><strong>第二种方式</strong>(<strong>推荐</strong>，稳定而又安全)，删除父表中的对应行，会将对应子表中的所有匹配行的外键约束列置为NULL，通过 on delete set null 子句实施：<br><code>SQL&gt; alter table emp add constraint emp_deptno_fk foreign key(deptno) references dept(deptno) on delete set null;</code></p>
<p>实际上，外键约束列和对应的父表列可以在同一张表中，常见的就是表的业务逻辑含义是一棵树，最简单的例子如下（id为主键id，fid为父id，fid存储对id的引用），这种结构的表根据业务要求可通过Oracle的递归查询来获取这种层级关系</p>
<h4 id="检查约束（CHECK"><a href="#检查约束（CHECK" class="headerlink" title="检查约束（CHECK)"></a>检查约束（CHECK)</h4><p>检查约束可用来实施一些简单的规则，比如列值必须在某个范围内。检查的规则必须是一个结果为true或false 的表达式，比如：<br><code>SQL&gt; alter table emp add constraint emp_sex_ck check(sex in(&#39;男&#39;,&#39;女&#39;));</code></p>
<h4 id="范例"><a href="#范例" class="headerlink" title="范例"></a>范例</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create table student</span><br><span class="line">  2  (</span><br><span class="line">  3   sid number constraint student_pk primary key,</span><br><span class="line">  4   sname varchar2(20) constraint student_name_notnull not null,</span><br><span class="line">  5   gender varchar2(2) constraint student_gender check (gender in (&apos;男&apos;,&apos;女&apos;)),</span><br><span class="line">  6   email varchar2(40) constraint student_email_unique unique</span><br><span class="line">  7                      constraint student_email_notnull not null,</span><br><span class="line">  8   deptno number constraint student_fk references dept(deptno) on delete set null</span><br><span class="line">  9  );</span><br></pre></td></tr></table></figure>
<h3 id="视图-view"><a href="#视图-view" class="headerlink" title="视图(view)"></a>视图(<code>view</code>)</h3><h4 id="什么是视图"><a href="#什么是视图" class="headerlink" title="什么是视图"></a>什么是视图</h4><p>视图是一种虚表，它是基于一个表或多个表或视图的逻辑表，本身不包含数据，通过它可以对表里面的数据进行查询和修改。视图基于的表称为基表。<font color="red">它最大的优点是简化复杂的查询</font>。我们可以将视图理解为<font color="red">存储起来的SELECT语句</font></p>
<h4 id="视图的优点"><a href="#视图的优点" class="headerlink" title="视图的优点"></a>视图的优点</h4><p>1.为用户集中数据，简化用户的数据查询和处理。<br>2.屏蔽数据库的复杂性，用户不必了解数据库的复杂性。<br>3.简化用户权限的管理，只授予用户使用视图的权限。<br>4.便于数据共享，多个用户不必都定义所需的数据。<br>5.可以重新组织数据，以便关联到其他应用中<br>6.同样的数据可以有不同的显示方式</p>
<h4 id="视图的创建"><a href="#视图的创建" class="headerlink" title="视图的创建"></a>视图的创建</h4><p><strong>视图创建语法</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">CREATE [OR REPLACE] [FORCE|NOFORCE] VIEW view_name   </span><br><span class="line">[(alias[, alias]...)]   </span><br><span class="line">AS subquery  </span><br><span class="line">[WITH CHECK OPTION [CONSTRAINT constraint]]   </span><br><span class="line">[WITH READ ONLY]</span><br></pre></td></tr></table></figure></p>
<p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/77383536.jpg" alt=""><br><strong>创建视图</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --查看当前用户</span><br><span class="line">SQL&gt; show user</span><br><span class="line">USER 为 &quot;SCOTT&quot;</span><br><span class="line">SQL&gt; create view emp_info_view</span><br><span class="line">  2  as</span><br><span class="line">  3  select e.empno,e.ename,e.sal,e.sal*12 年薪,d.dname</span><br><span class="line">  4  from emp e,dept d</span><br><span class="line">  5  where e.deptno=d.deptno;</span><br><span class="line">create view emp_info_view</span><br><span class="line">            *</span><br><span class="line">第 1 行出现错误:</span><br><span class="line">ORA-01031: 权限不足</span><br></pre></td></tr></table></figure></p>
<p>以上操作发现权限不足，以管理员用户登录给当前用户授予视图创建权限</p>
<p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/45836047.jpg" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create view emp_info_view</span><br><span class="line">  2  as</span><br><span class="line">  3  select e.empno,e.ename,e.sal,e.sal*12 年薪,d.dname</span><br><span class="line">  4  from emp e,dept d</span><br><span class="line">  5  where e.deptno=d.deptno;</span><br><span class="line"></span><br><span class="line">视图已创建。</span><br><span class="line">SQL&gt; desc emp_info_view;</span><br><span class="line"> 名称                                                              是否为空? 类型</span><br><span class="line"> ----------------------------------------------------------------- -------- --------------</span><br><span class="line"> EMPNO                                                             NOT NULL NUMBER(4)</span><br><span class="line"> ENAME                                                                      VARCHAR2(10)</span><br><span class="line"> SAL                                                                        NUMBER(7,2)</span><br><span class="line"> 年薪                                                                       NUMBER</span><br><span class="line"> DNAME                                                                      VARCHAR2(14)</span><br><span class="line"></span><br><span class="line">SQL&gt; --这个例子很好诠释了我们可以将视图理解为 存储起来的SELECT语句 这句话</span><br><span class="line">SQL&gt; select * from emp_info_view;</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME             SAL       年薪 DNAME</span><br><span class="line">---------- ---------- ---------- ---------- --------------</span><br><span class="line">      7369 SMITH             800       9600 RESEARCH</span><br><span class="line">      7499 ALLEN            1600      19200 SALES</span><br><span class="line">      7521 WARD             1250      15000 SALES</span><br><span class="line">      7566 JONES            2975      35700 RESEARCH</span><br><span class="line">      7654 MARTIN           1250      15000 SALES</span><br><span class="line">      7698 BLAKE            2850      34200 SALES</span><br><span class="line">      7782 CLARK            2450      29400 ACCOUNTING</span><br><span class="line">      7788 SCOTT            3000      36000 RESEARCH</span><br><span class="line">      7839 KING             5000      60000 ACCOUNTING</span><br><span class="line">      7844 TURNER           1500      18000 SALES</span><br><span class="line">      7876 ADAMS            1100      13200 RESEARCH</span><br><span class="line">      7900 JAMES             950      11400 SALES</span><br><span class="line">      7902 FORD             3000      36000 RESEARCH</span><br><span class="line">      7934 MILLER           1300      15600 ACCOUNTING</span><br><span class="line"></span><br><span class="line">已选择 14 行。</span><br></pre></td></tr></table></figure></p>
<p><strong>注意:</strong> 不建议通过视图对表中数据进行修改，因为会受到大量的限制。</p>
<h4 id="视图的修改"><a href="#视图的修改" class="headerlink" title="视图的修改"></a>视图的修改</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create or replace view emp_info_view</span><br><span class="line">  2  as</span><br><span class="line">  3  select e.empno,e.ename,e.sal,e.job,d.dname</span><br><span class="line">  4  from emp e,dept d</span><br><span class="line">  5  where e.deptno=d.deptno;</span><br><span class="line"></span><br><span class="line">视图已创建。</span><br><span class="line"></span><br><span class="line">SQL&gt; desc emp_info_view;</span><br><span class="line"> 名称                                                              是否为空? 类型</span><br><span class="line"> ----------------------------------------------------------------- -------- --------------------</span><br><span class="line"> EMPNO                                                             NOT NULL NUMBER(4)</span><br><span class="line"> ENAME                                                                      VARCHAR2(10)</span><br><span class="line"> SAL                                                                        NUMBER(7,2)</span><br><span class="line"> JOB                                                                        VARCHAR2(9)</span><br><span class="line"> DNAME                                                                      VARCHAR2(14)</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from emp_info_view;</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME             SAL JOB       DNAME</span><br><span class="line">---------- ---------- ---------- --------- --------------</span><br><span class="line">      7369 SMITH             800 CLERK     RESEARCH</span><br><span class="line">      7499 ALLEN            1600 SALESMAN  SALES</span><br><span class="line">      7521 WARD             1250 SALESMAN  SALES</span><br><span class="line">      7566 JONES            2975 MANAGER   RESEARCH</span><br><span class="line">      7654 MARTIN           1250 SALESMAN  SALES</span><br><span class="line">      7698 BLAKE            2850 MANAGER   SALES</span><br><span class="line">      7782 CLARK            2450 MANAGER   ACCOUNTING</span><br><span class="line">      7788 SCOTT            3000 ANALYST   RESEARCH</span><br><span class="line">      7839 KING             5000 PRESIDENT ACCOUNTING</span><br><span class="line">      7844 TURNER           1500 SALESMAN  SALES</span><br><span class="line">      7876 ADAMS            1100 CLERK     RESEARCH</span><br><span class="line">      7900 JAMES             950 CLERK     SALES</span><br><span class="line">      7902 FORD             3000 ANALYST   RESEARCH</span><br><span class="line">      7934 MILLER           1300 CLERK     ACCOUNTING</span><br><span class="line"></span><br><span class="line">已选择 14 行。</span><br></pre></td></tr></table></figure>
<h4 id="视图的删除"><a href="#视图的删除" class="headerlink" title="视图的删除"></a>视图的删除</h4><p><code>drop view emp_info_view;</code></p>
<h3 id="序列-sequence"><a href="#序列-sequence" class="headerlink" title="序列(sequence)"></a>序列(<code>sequence</code>)</h3><h4 id="什么是序列"><a href="#什么是序列" class="headerlink" title="什么是序列"></a>什么是序列</h4><p><strong>序列:</strong>可供多个用户用来产生唯一数值的对象<br><strong>优点：</strong><br>1、自动提供唯一的数值<br>2、共享对象<br>3、主要用于提供主键值<br>4、将序列值装入内存可以提高访问效率</p>
<p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/90857460.jpg" alt=""></p>
<h4 id="序列创建语法"><a href="#序列创建语法" class="headerlink" title="序列创建语法"></a>序列创建语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">CREATE SEQUENCE 序列名</span><br><span class="line">[INCREMENT BY n]</span><br><span class="line">[START WITH n]</span><br><span class="line">[&#123;MAXVALUE n|NOMAXVALUE&#125;]</span><br><span class="line">[&#123;MINVALUE n|NOMINVALUE&#125;]</span><br><span class="line">[&#123;CYCLE|NOCYCLE&#125;]</span><br><span class="line">[&#123;CACHE n|NOCACHE&#125;];</span><br></pre></td></tr></table></figure>
<p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/94005078.jpg" alt=""></p>
<h4 id="创建序列"><a href="#创建序列" class="headerlink" title="创建序列"></a>创建序列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create sequence my_seq</span><br><span class="line">  2  increment by 1</span><br><span class="line">  3  start with 1</span><br><span class="line">  4  nomaxvalue</span><br><span class="line">  5  nominvalue</span><br><span class="line">  6  nocycle</span><br><span class="line">  7  nocache;</span><br><span class="line"></span><br><span class="line">序列已创建。</span><br></pre></td></tr></table></figure>
<h4 id="查询序列"><a href="#查询序列" class="headerlink" title="查询序列"></a>查询序列</h4><p>查询数据字典视图<code>user_sequences</code>获取序列定义信息<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select sequence_name,max_value,min_value,increment_by,last_number</span><br><span class="line">  2  from user_sequences;</span><br><span class="line"></span><br><span class="line">SEQUENCE_NAME                   MAX_VALUE  MIN_VALUE INCREMENT_BY LAST_NUMBER</span><br><span class="line">------------------------------ ---------- ---------- ------------ -----------</span><br><span class="line">MY_SEQ                         1.0000E+27          1            1</span><br><span class="line">    1</span><br></pre></td></tr></table></figure></p>
<h4 id="nextval和currval伪列"><a href="#nextval和currval伪列" class="headerlink" title="nextval和currval伪列"></a><code>nextval</code>和<code>currval</code>伪列</h4><p><code>nextval</code>返回序列中下一个有效的值，任何用户都可以引用<br><code>currval</code>中存放序列的当前值(初始在序列初始值的前一位)</p>
<h4 id="序列的应用"><a href="#序列的应用" class="headerlink" title="序列的应用"></a>序列的应用</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create table test_seq(</span><br><span class="line">  2  td number,</span><br><span class="line">  3  tname varchar(20)</span><br><span class="line">  4  );</span><br><span class="line"></span><br><span class="line">表已创建。</span><br><span class="line"></span><br><span class="line">SQL&gt; insert into test_seq values(my_seq.nextval,&apos;hahaha&apos;);</span><br><span class="line"></span><br><span class="line">已创建 1 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; /</span><br><span class="line"></span><br><span class="line">已创建 1 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; /</span><br><span class="line"></span><br><span class="line">已创建 1 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; /</span><br><span class="line"></span><br><span class="line">已创建 1 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; /</span><br><span class="line"></span><br><span class="line">已创建 1 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from test_seq;</span><br><span class="line"></span><br><span class="line">        TD TNAME</span><br><span class="line">---------- --------------------</span><br><span class="line">         1 hahaha</span><br><span class="line">         2 hahaha</span><br><span class="line">         3 hahaha</span><br><span class="line">         4 hahaha</span><br><span class="line">         5 hahaha</span><br></pre></td></tr></table></figure>
<h4 id="序列可能产生裂缝的原因"><a href="#序列可能产生裂缝的原因" class="headerlink" title="序列可能产生裂缝的原因"></a>序列可能产生裂缝的原因</h4><p>1、回滚<br>2、系统异常<br>3、多个用户同时使用同一序列</p>
<h4 id="修改序列"><a href="#修改序列" class="headerlink" title="修改序列"></a>修改序列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; alter sequence my_seq</span><br><span class="line">  2  maxvalue 99999</span><br><span class="line">  3  increment by 2;</span><br><span class="line"></span><br><span class="line">序列已更改。</span><br></pre></td></tr></table></figure>
<p><strong>注意：</strong><br>1、修改序列必须是序列的拥有者或者对序列有alter权限<br>2、只有将来的序列值会被改变<br>3、改变序列的初始值只能通过删除序列后重建序列的方法实现</p>
<h4 id="删除序列"><a href="#删除序列" class="headerlink" title="删除序列"></a>删除序列</h4><p><code>drop sequence my_seq;</code></p>
<h3 id="索引-index"><a href="#索引-index" class="headerlink" title="索引(index)"></a>索引(<code>index</code>)</h3><h4 id="什么是索引"><a href="#什么是索引" class="headerlink" title="什么是索引"></a>什么是索引</h4><p>1、一种独立于表的模式对象，可以存储在与表不同的磁盘或表空间中。<br>2、索引被删除或损坏，不会对表产生影响，其影响的知识查询的速度。<br>3、索引一旦建立，Oracle管理系统会对其进行自动维护，而且由Oracle管理系统决定何时使用索引，用户不用在查询语句中指定使用哪个索引。<br>4、在删除一个表时，所有基于该表的索引都会被自动删除。<br>5、索引能通过指针加速Oracle服务器的查询速度。<br>6、索引能通过快速定位数据的方式，减少磁盘I/O。</p>
<h4 id="创建索引"><a href="#创建索引" class="headerlink" title="创建索引"></a>创建索引</h4><p><strong>自动创建</strong>:在定义primary key或unique约束后系统自动在相应的列上创建<strong>唯一性</strong>索引</p>
<p><strong>手动创建</strong>:用户可以在其他列上创建非唯一的索引，以加速查询。</p>
<p><strong>单列索引</strong><br><code>create index ename_index on emp(ename);</code></p>
<p><strong>复合索引</strong><br><strong>复合索引</strong>是基于两个或两个以上列的索引。在同一张表上可以有多个索引，但要求列的组合必须不同。<br><code>create index emp_index1 on emp(ename,job);</code><br>和<br><code>create index emp_index2 on emp(job,ename);</code><br>是两个不同的索引</p>
<h4 id="什么情况下创建索引"><a href="#什么情况下创建索引" class="headerlink" title="什么情况下创建索引"></a>什么情况下创建索引</h4><p><strong>以下情况创建索引:</strong><br>1、列中数据分布范围很广。<br>2、列经常在where字句或连接条件中出现。<br>3、表经常被访问且数据量很大，访问的数据大约占数据总量的2%-4%以上。</p>
<p><strong>以下情况不要创建索引:</strong><br>1、表很小<br>2、列不经常在where字句或连接条件中出现。<br>3、访问的数据小于数据总量的2%-4%。<br>4、表经常更新。</p>
<h4 id="查询索引"><a href="#查询索引" class="headerlink" title="查询索引"></a>查询索引</h4><p>oracle中表的索引信息存在 user_indexes 和 user_ind_columns 两张表里面，<br>其中，<br>user_indexes 系统视图存放是索引的名称以及该索引是否是唯一索引等信息，<br>user_ind_columns 统视图存放的是索引名称，对应的表和列等</p>
<p><strong>基本查询</strong>：<br><code>select * from user_indexes;</code><br><code>select * from user_ind_columns t;</code><br><strong>关联查询</strong>：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">select i.index_name,</span><br><span class="line">       i.index_type,</span><br><span class="line">       i.table_owner,</span><br><span class="line">       i.table_name,</span><br><span class="line">       i.uniqueness,</span><br><span class="line">       i.tablespace_name,</span><br><span class="line">       c.column_name,</span><br><span class="line">       c.column_position,</span><br><span class="line">       c.column_length</span><br><span class="line">from user_indexes i, user_ind_columns c</span><br><span class="line">where i.index_name = c.index_name;</span><br></pre></td></tr></table></figure></p>
<h4 id="删除索引"><a href="#删除索引" class="headerlink" title="删除索引"></a>删除索引</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; drop index emp_index2;</span><br><span class="line"></span><br><span class="line">索引已删除。</span><br></pre></td></tr></table></figure>
<h3 id="同义词-synonym"><a href="#同义词-synonym" class="headerlink" title="同义词(synonym)"></a>同义词(<code>synonym</code>)</h3><h4 id="创建同义词"><a href="#创建同义词" class="headerlink" title="创建同义词"></a>创建同义词</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create synonym hr_emp for hr.employees;</span><br><span class="line">create synonym hr_emp for hr.employees</span><br><span class="line">*</span><br><span class="line">第 1 行出现错误:</span><br><span class="line">ORA-01031: 权限不足</span><br></pre></td></tr></table></figure>
<p>发现权限不足,用管理员账号给用户授权</p>
<p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/71908794.jpg" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create synonym hr_emp for hr.employees;</span><br><span class="line"></span><br><span class="line">同义词已创建。</span><br></pre></td></tr></table></figure></p>
<h4 id="使用同义词"><a href="#使用同义词" class="headerlink" title="使用同义词"></a>使用同义词</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select count(*) from hr_emp;</span><br><span class="line"></span><br><span class="line">  COUNT(*)                                                                                                                                                                                              </span><br><span class="line">----------                                                                                                                                                                                              </span><br><span class="line">       107</span><br></pre></td></tr></table></figure>
<h4 id="删除同义词"><a href="#删除同义词" class="headerlink" title="删除同义词"></a>删除同义词</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; drop synonym hr_emp;</span><br><span class="line"></span><br><span class="line">同义词已删除。</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="Oracle中的事务"><a href="#Oracle中的事务" class="headerlink" title="Oracle中的事务"></a>Oracle中的事务</h1><h2 id="什么是事务"><a href="#什么是事务" class="headerlink" title="什么是事务"></a>什么是事务</h2><p>在数据库中事务是工作的逻辑单元,一个事务是由一个或多个完成一组的相关行为的SQL语句组成,通过事务机制确保这一组SQL语句所作的操作要么完全成功执行,完成整个工作单元操作,要么一点也不执行。</p>
<h2 id="Oracle的特性"><a href="#Oracle的特性" class="headerlink" title="Oracle的特性"></a>Oracle的特性</h2><p>  对一组SQL语句操作构成事务,数据库操作系统必须确保这些操作的原子性,一致性,隔离性,持久性<br>1、原子性(Atomicity)<br>事务的原子性是指事务中包含的所有操作要么全做，要么不做,也就是说所有的活动在数据库中要么全部反映,要么全部不反映,以保证数据库的一致性。<br>2、一致性(Consistency)<br>事务的一致性是指数据库在事务操作前和事务处理后,其中数据必须满足业务的规则约束。<br>3、隔离性(Isolation)<br>隔离性是指数据库允许多个并发的事务同时对其中的数据进行读写或修改的能力,隔离性可以防止多个事务的并发执行时,由于它们的操作命令交叉执行而导致数据的不一致性。<br>4、持久性(durability)<br>事务的持久性是指在事务处理结束后,它对数据的修改应该是永久的。即便是系统在遇到故障的情况下也不会丢失,这是数据的重要性决定的。</p>
<h2 id="Oracle事务的起始、提交与回滚标志"><a href="#Oracle事务的起始、提交与回滚标志" class="headerlink" title="Oracle事务的起始、提交与回滚标志"></a>Oracle事务的起始、提交与回滚标志</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">起始标志: 事务中的第一条DML语句</span><br><span class="line">提交标志：显式  commit    隐式： 正常退出（exit） DDL DCL</span><br><span class="line">回滚标志：显式 rollback   隐式： 非正常退出（直接关闭窗口） 掉电  宕机</span><br></pre></td></tr></table></figure>
<h2 id="Oracle事务的保存点"><a href="#Oracle事务的保存点" class="headerlink" title="Oracle事务的保存点"></a>Oracle事务的保存点</h2><p><strong>保存点(savepoint)的概念和作用</strong><br>保存点是事务中的一点,用于取消部分事务,保存点记录的是当前数据库的状态<br>在事务commit提交前,可以使用rollback 到指定的保存点,来回退到指定的保存点<br>在事务commit提交后,保存点会被删除,这个时候,就无法进行回退了</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; create table testsavepoint(</span><br><span class="line">  2  tid number,</span><br><span class="line">  3  tname varchar(20)</span><br><span class="line">  4  );</span><br><span class="line"></span><br><span class="line">表已创建。</span><br><span class="line"></span><br><span class="line">SQL&gt; insert into testsavepoint values(1,&apos;Tom&apos;);</span><br><span class="line"></span><br><span class="line">已创建 1 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; insert into testsavepoint values(2,&apos;Mary&apos;);</span><br><span class="line"></span><br><span class="line">已创建 1 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; savepoint a;</span><br><span class="line"></span><br><span class="line">保存点已创建。</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from testsavepoint;</span><br><span class="line"></span><br><span class="line">       TID TNAME</span><br><span class="line">---------- --------------------</span><br><span class="line">         1 Tom</span><br><span class="line">         2 Mary</span><br><span class="line"></span><br><span class="line">SQL&gt; insert into testsavepoint values(3,&apos;Maee&apos;);</span><br><span class="line"></span><br><span class="line">已创建 1 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from testsavepoint;</span><br><span class="line"></span><br><span class="line">       TID TNAME</span><br><span class="line">---------- --------------------</span><br><span class="line">         1 Tom</span><br><span class="line">         2 Mary</span><br><span class="line">         3 Maee</span><br><span class="line"></span><br><span class="line">SQL&gt; --设第三条数据输入错误 Mike 错打成 Maee 回滚到保存点a</span><br><span class="line"></span><br><span class="line">SQL&gt; rollback to savepoint a;</span><br><span class="line"></span><br><span class="line">回退已完成。</span><br><span class="line"></span><br><span class="line">SQL&gt; select * from testsavepoint;</span><br><span class="line"></span><br><span class="line">       TID TNAME</span><br><span class="line">---------- --------------------</span><br><span class="line">         1 Tom</span><br><span class="line">         2 Mary</span><br></pre></td></tr></table></figure>
<h2 id="Oracle事务的隔离级别"><a href="#Oracle事务的隔离级别" class="headerlink" title="Oracle事务的隔离级别"></a>Oracle事务的隔离级别</h2><p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/44106610.jpg" alt=""><br>MySQL支持4中事务隔离级别：读未提交数据、读已提交数据、可重复读(默认)、串行化<br>Oracle只支持3种事务隔离级别:读已提交数据(默认)、串行化、只读</p>
<p><strong>只读事务演示</strong><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; set transaction read only;</span><br><span class="line"></span><br><span class="line">事务处理集。</span><br><span class="line"></span><br><span class="line">SQL&gt; insert into testsavepoint values(3,&apos;Maee&apos;);</span><br><span class="line">insert into testsavepoint values(3,&apos;Maee&apos;)</span><br><span class="line">            *</span><br><span class="line">第 1 行出现错误:</span><br><span class="line">ORA-01456: 不能在 READ ONLY 事务处理中执行插入/删除/更新操作</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

  <div>
    
    <div>
    
        <div style="text-align:center;color: #555;font-size:14px;">-------------The End-------------</div>
    
</div>
    
  </div>

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Oracle/" rel="tag"><i class="fa fa-tag"></i>Oracle</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/07/10/Oracle(3)多表查询、子查询、集合运算/" rel="next" title="Oracle(3)多表查询、子查询、集合运算">
                <i class="fa fa-chevron-left"></i> Oracle(3)多表查询、子查询、集合运算
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/07/12/Oracle(5)PLSQL Developer安装、PLSQL基础/" rel="prev" title="Oracle(5)PLSQL Developer安装、PL/SQL基础">
                Oracle(5)PLSQL Developer安装、PL/SQL基础 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="JiachengLai" />
            
              <p class="site-author-name" itemprop="name">JiachengLai</p>
              <p class="site-description motion-element" itemprop="description">纸上得来终觉浅，绝知此事要躬行</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">20</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">8</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">13</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#SQL语句类型"><span class="nav-number">1.</span> <span class="nav-text">SQL语句类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#三种SQL语句类型"><span class="nav-number">1.1.</span> <span class="nav-text">三种SQL语句类型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据操作语言DML"><span class="nav-number">1.2.</span> <span class="nav-text">数据操作语言DML</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#插入insert"><span class="nav-number">1.2.1.</span> <span class="nav-text">插入insert</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#使用地址符-amp-完成数据批量插入"><span class="nav-number">1.2.1.1.</span> <span class="nav-text">使用地址符&amp;完成数据批量插入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用子查询完成数据批量插入"><span class="nav-number">1.2.1.2.</span> <span class="nav-text">使用子查询完成数据批量插入</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其它批量插入数据的方式"><span class="nav-number">1.2.1.3.</span> <span class="nav-text">其它批量插入数据的方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查询select"><span class="nav-number">1.2.2.</span> <span class="nav-text">查询select</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除delete"><span class="nav-number">1.2.3.</span> <span class="nav-text">删除delete</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#利用地址符-amp-完成删除操作"><span class="nav-number">1.2.3.1.</span> <span class="nav-text">利用地址符&amp;完成删除操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#delete和truncate的区别"><span class="nav-number">1.2.3.2.</span> <span class="nav-text">delete和truncate的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#表碎片"><span class="nav-number">1.2.3.3.</span> <span class="nav-text">表碎片</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#delete-产生表碎片的原因"><span class="nav-number">1.2.3.3.1.</span> <span class="nav-text">delete 产生表碎片的原因</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#为什么要整理表碎片"><span class="nav-number">1.2.3.3.2.</span> <span class="nav-text">为什么要整理表碎片</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#表碎片导致的问题"><span class="nav-number">1.2.3.3.3.</span> <span class="nav-text">表碎片导致的问题</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#表碎片的清除"><span class="nav-number">1.2.3.3.4.</span> <span class="nav-text">表碎片的清除</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#更新update"><span class="nav-number">1.2.4.</span> <span class="nav-text">更新update</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数据定义语言DDL"><span class="nav-number">1.3.</span> <span class="nav-text">数据定义语言DDL</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#常见的数据库对象"><span class="nav-number">1.3.1.</span> <span class="nav-text">常见的数据库对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建表空间"><span class="nav-number">1.3.2.</span> <span class="nav-text">创建表空间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#用户"><span class="nav-number">1.3.3.</span> <span class="nav-text">用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#创建表"><span class="nav-number">1.3.4.</span> <span class="nav-text">创建表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#表中的数据类型"><span class="nav-number">1.3.4.1.</span> <span class="nav-text">表中的数据类型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#普通的建表方式"><span class="nav-number">1.3.4.2.</span> <span class="nav-text">普通的建表方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#利用子查询创建表"><span class="nav-number">1.3.4.3.</span> <span class="nav-text">利用子查询创建表</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#修改表"><span class="nav-number">1.3.5.</span> <span class="nav-text">修改表</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#增加新列"><span class="nav-number">1.3.5.1.</span> <span class="nav-text">增加新列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改列行列"><span class="nav-number">1.3.5.2.</span> <span class="nav-text">修改列行列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除列"><span class="nav-number">1.3.5.3.</span> <span class="nav-text">删除列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#重命名列"><span class="nav-number">1.3.5.4.</span> <span class="nav-text">重命名列</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#删除表"><span class="nav-number">1.3.6.</span> <span class="nav-text">删除表</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#回收站（recyclebin）"><span class="nav-number">1.3.7.</span> <span class="nav-text">回收站（recyclebin）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#约束"><span class="nav-number">1.3.8.</span> <span class="nav-text">约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#主键约束（PRIMARY-KEY"><span class="nav-number">1.3.8.1.</span> <span class="nav-text">主键约束（PRIMARY KEY)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#唯一性约束（UNIQUE"><span class="nav-number">1.3.8.2.</span> <span class="nav-text">唯一性约束（UNIQUE)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#非空约束（NOT-NULL"><span class="nav-number">1.3.8.3.</span> <span class="nav-text">非空约束（NOT NULL)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#外键约束（FOREIGN-KEY）"><span class="nav-number">1.3.8.4.</span> <span class="nav-text">外键约束（FOREIGN KEY）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#检查约束（CHECK"><span class="nav-number">1.3.8.5.</span> <span class="nav-text">检查约束（CHECK)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#范例"><span class="nav-number">1.3.8.6.</span> <span class="nav-text">范例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#视图-view"><span class="nav-number">1.3.9.</span> <span class="nav-text">视图(view)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是视图"><span class="nav-number">1.3.9.1.</span> <span class="nav-text">什么是视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#视图的优点"><span class="nav-number">1.3.9.2.</span> <span class="nav-text">视图的优点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#视图的创建"><span class="nav-number">1.3.9.3.</span> <span class="nav-text">视图的创建</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#视图的修改"><span class="nav-number">1.3.9.4.</span> <span class="nav-text">视图的修改</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#视图的删除"><span class="nav-number">1.3.9.5.</span> <span class="nav-text">视图的删除</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#序列-sequence"><span class="nav-number">1.3.10.</span> <span class="nav-text">序列(sequence)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是序列"><span class="nav-number">1.3.10.1.</span> <span class="nav-text">什么是序列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#序列创建语法"><span class="nav-number">1.3.10.2.</span> <span class="nav-text">序列创建语法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建序列"><span class="nav-number">1.3.10.3.</span> <span class="nav-text">创建序列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查询序列"><span class="nav-number">1.3.10.4.</span> <span class="nav-text">查询序列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#nextval和currval伪列"><span class="nav-number">1.3.10.5.</span> <span class="nav-text">nextval和currval伪列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#序列的应用"><span class="nav-number">1.3.10.6.</span> <span class="nav-text">序列的应用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#序列可能产生裂缝的原因"><span class="nav-number">1.3.10.7.</span> <span class="nav-text">序列可能产生裂缝的原因</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改序列"><span class="nav-number">1.3.10.8.</span> <span class="nav-text">修改序列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除序列"><span class="nav-number">1.3.10.9.</span> <span class="nav-text">删除序列</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#索引-index"><span class="nav-number">1.3.11.</span> <span class="nav-text">索引(index)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#什么是索引"><span class="nav-number">1.3.11.1.</span> <span class="nav-text">什么是索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建索引"><span class="nav-number">1.3.11.2.</span> <span class="nav-text">创建索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#什么情况下创建索引"><span class="nav-number">1.3.11.3.</span> <span class="nav-text">什么情况下创建索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#查询索引"><span class="nav-number">1.3.11.4.</span> <span class="nav-text">查询索引</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除索引"><span class="nav-number">1.3.11.5.</span> <span class="nav-text">删除索引</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#同义词-synonym"><span class="nav-number">1.3.12.</span> <span class="nav-text">同义词(synonym)</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建同义词"><span class="nav-number">1.3.12.1.</span> <span class="nav-text">创建同义词</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用同义词"><span class="nav-number">1.3.12.2.</span> <span class="nav-text">使用同义词</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#删除同义词"><span class="nav-number">1.3.12.3.</span> <span class="nav-text">删除同义词</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Oracle中的事务"><span class="nav-number">2.</span> <span class="nav-text">Oracle中的事务</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#什么是事务"><span class="nav-number">2.1.</span> <span class="nav-text">什么是事务</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Oracle的特性"><span class="nav-number">2.2.</span> <span class="nav-text">Oracle的特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Oracle事务的起始、提交与回滚标志"><span class="nav-number">2.3.</span> <span class="nav-text">Oracle事务的起始、提交与回滚标志</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Oracle事务的保存点"><span class="nav-number">2.4.</span> <span class="nav-text">Oracle事务的保存点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Oracle事务的隔离级别"><span class="nav-number">2.5.</span> <span class="nav-text">Oracle事务的隔离级别</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JiachengLai</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

  <script type="text/javascript" src="/js/src/love.js"></script>
</body>
</html>
