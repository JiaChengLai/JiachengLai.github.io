<!DOCTYPE html>



  


<html class="theme-next gemini use-motion" lang="Zh-Hans">
<head>
  <meta charset="UTF-8"/>

<script>
    (function(){
        if(''){
            if (prompt('请输入文章密码') !== ''){
                alert('密码错误');
                history.back();
            }
        }
    })();
</script>

<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
<meta name="theme-color" content="#222">








<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css" />







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css" />


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Oracle," />










<meta name="description" content="单行函数字符函数 大小写控制函数字符转小写lower()123456SQL&amp;gt; select lower(&amp;apos;Hello World&amp;apos;) 转小写  2  from dual;转小写     -----------hello world 字符转大写upper()123456SQL&amp;gt; select upper(&amp;apos;Hello World&amp;apos;) 转大写  2">
<meta name="keywords" content="Oracle">
<meta property="og:type" content="article">
<meta property="og:title" content="Oracle(2)单行函数、多行函数">
<meta property="og:url" content="http://yoursite.com/2018/07/09/Oracle(2)单行函数、多行函数/index.html">
<meta property="og:site_name" content="晨">
<meta property="og:description" content="单行函数字符函数 大小写控制函数字符转小写lower()123456SQL&amp;gt; select lower(&amp;apos;Hello World&amp;apos;) 转小写  2  from dual;转小写     -----------hello world 字符转大写upper()123456SQL&amp;gt; select upper(&amp;apos;Hello World&amp;apos;) 转大写  2">
<meta property="og:locale" content="Zh-Hans">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/18575276.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/37132769.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/12428923.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/81252686.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/40181007.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/49314554.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/62538311.jpg">
<meta property="og:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/29860265.jpg">
<meta property="og:updated_time" content="2019-02-18T07:19:42.432Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Oracle(2)单行函数、多行函数">
<meta name="twitter:description" content="单行函数字符函数 大小写控制函数字符转小写lower()123456SQL&amp;gt; select lower(&amp;apos;Hello World&amp;apos;) 转小写  2  from dual;转小写     -----------hello world 字符转大写upper()123456SQL&amp;gt; select upper(&amp;apos;Hello World&amp;apos;) 转大写  2">
<meta name="twitter:image" content="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/18575276.jpg">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://yoursite.com/2018/07/09/Oracle(2)单行函数、多行函数/"/>





  <title>Oracle(2)单行函数、多行函数 | 晨</title>
  








</head>

<!--卖萌-->
<script type="text/javascript" src="/js/src/mytitle.js"></script>

<body itemscope itemtype="http://schema.org/WebPage" lang="Zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/"  class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">晨</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">学无止境</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            Home
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            Categories
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            Archives
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2018/07/09/Oracle(2)单行函数、多行函数/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="JiachengLai">
      <meta itemprop="description" content="">
      <meta itemprop="image" content="/images/avatar.jpg">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="晨">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Oracle(2)单行函数、多行函数</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2018-07-09T16:13:20+08:00">
                2018-07-09
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Oracle/" itemprop="url" rel="index">
                    <span itemprop="name">Oracle</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="单行函数"><a href="#单行函数" class="headerlink" title="单行函数"></a>单行函数</h1><h2 id="字符函数"><a href="#字符函数" class="headerlink" title="字符函数"></a>字符函数</h2><p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/18575276.jpg" alt=""></p>
<h3 id="大小写控制函数"><a href="#大小写控制函数" class="headerlink" title="大小写控制函数"></a>大小写控制函数</h3><h4 id="字符转小写lower"><a href="#字符转小写lower" class="headerlink" title="字符转小写lower()"></a>字符转小写<code>lower()</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select lower(&apos;Hello World&apos;) 转小写</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">转小写     </span><br><span class="line">-----------</span><br><span class="line">hello world</span><br></pre></td></tr></table></figure>
<h4 id="字符转大写upper"><a href="#字符转大写upper" class="headerlink" title="字符转大写upper()"></a>字符转大写<code>upper()</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select upper(&apos;Hello World&apos;) 转大写</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">转大写</span><br><span class="line">-----------</span><br><span class="line">HELLO WORLD</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h4 id="首字母大写initcap"><a href="#首字母大写initcap" class="headerlink" title="首字母大写initcap()"></a>首字母大写<code>initcap()</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select initcap(&apos;hello world&apos;) 首字母大写</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">首字母大写</span><br><span class="line">-----------</span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure>
<h3 id="字符控制函数"><a href="#字符控制函数" class="headerlink" title="字符控制函数"></a>字符控制函数</h3><h4 id="字符串拼接-concat"><a href="#字符串拼接-concat" class="headerlink" title="字符串拼接(concat())"></a>字符串拼接(<code>concat()</code>)</h4><p>Oracle中的concat()只允许两个参数；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select empno,concat(ename,concat(&apos;的薪水是&apos;,sal)) 信息 from emp;</span><br><span class="line"></span><br><span class="line">     EMPNO 信息</span><br><span class="line">---------- ----------------------------------------------------------</span><br><span class="line">      1001 Tom_AB的薪水是3000</span><br><span class="line">      7369 SMITH的薪水是800</span><br><span class="line">      7499 ALLEN的薪水是1600</span><br><span class="line">      7521 WARD的薪水是1250</span><br><span class="line">      7566 JONES的薪水是2975</span><br><span class="line">      7654 MARTIN的薪水是1250</span><br><span class="line">      7698 BLAKE的薪水是2850</span><br><span class="line">      7782 CLARK的薪水是2450</span><br><span class="line">      7788 SCOTT的薪水是3000</span><br><span class="line">      7839 KING的薪水是5000</span><br><span class="line">      7844 TURNER的薪水是1500</span><br><span class="line">      7876 ADAMS的薪水是1100</span><br><span class="line">      7900 JAMES的薪水是950</span><br><span class="line">      7902 FORD的薪水是3000</span><br><span class="line">      7934 MILLER的薪水是1300</span><br><span class="line"></span><br><span class="line">已选择 15 行。</span><br></pre></td></tr></table></figure></p>
<h4 id="字段合并-wm-concat"><a href="#字段合并-wm-concat" class="headerlink" title="字段合并(wm_concat())"></a>字段合并(<code>wm_concat()</code>)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; col 部门成员 for a60;</span><br><span class="line">SQL&gt; select deptno,wm_concat(ename) 部门成员</span><br><span class="line">  2  from emp</span><br><span class="line">  3  group by deptno;</span><br><span class="line"></span><br><span class="line">    DEPTNO 部门成员</span><br><span class="line">---------- ------------------------------------------------------------</span><br><span class="line">        10 CLARK,KING,MILLER</span><br><span class="line">        20 SMITH,FORD,ADAMS,SCOTT,JONES</span><br><span class="line">        30 ALLEN,BLAKE,MARTIN,TURNER,JAMES,WARD</span><br></pre></td></tr></table></figure>
<p><strong><em>一道面试题</em></strong></p>
<p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/37132769.jpg" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select c.ci_id,s.stu_name</span><br><span class="line">  2  from pm_ci c,pm_stu s</span><br><span class="line">  3  where instr(c.stu_ids,s.stu_id)&gt;0;</span><br><span class="line"></span><br><span class="line">CI_ID                STU_NAME</span><br><span class="line">-------------------- ----------------------------------------</span><br><span class="line">1                    张三</span><br><span class="line">1                    李四</span><br><span class="line">1                    王五</span><br><span class="line">1                    赵六</span><br><span class="line">2                    张三</span><br><span class="line">2                    赵六</span><br><span class="line"></span><br><span class="line">已选择 6 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; --字段合并</span><br><span class="line">SQL&gt; -- wm_concat(varchar2) 多行函数</span><br><span class="line">SQL&gt; select ci_id,wm_concat(stu_name) stu_name from</span><br><span class="line">  2  (select c.ci_id,s.stu_name</span><br><span class="line">  3  from pm_ci c,pm_stu s</span><br><span class="line">  4  where instr(c.stu_ids,s.stu_id)&gt;0)</span><br><span class="line">  5  group by ci_id;</span><br><span class="line"></span><br><span class="line">CI_ID                STU_NAME</span><br><span class="line">-------------------- ----------------------------------------</span><br><span class="line">1                    张三,李四,王五,赵六</span><br><span class="line">2                    张三,赵六</span><br></pre></td></tr></table></figure></p>
<h4 id="连接符"><a href="#连接符" class="headerlink" title="连接符(||)"></a>连接符(<code>||</code>)</h4><p>Oracle中的连接符可以拼接多个参数；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt;  select empno,ename||&apos;的薪水是&apos;||sal 信息 from emp;</span><br><span class="line"></span><br><span class="line">     EMPNO 信息</span><br><span class="line">---------- ----------------------------------------------------------</span><br><span class="line">      1001 Tom_AB的薪水是3000</span><br><span class="line">      7369 SMITH的薪水是800</span><br><span class="line">      7499 ALLEN的薪水是1600</span><br><span class="line">      7521 WARD的薪水是1250</span><br><span class="line">      7566 JONES的薪水是2975</span><br><span class="line">      7654 MARTIN的薪水是1250</span><br><span class="line">      7698 BLAKE的薪水是2850</span><br><span class="line">      7782 CLARK的薪水是2450</span><br><span class="line">      7788 SCOTT的薪水是3000</span><br><span class="line">      7839 KING的薪水是5000</span><br><span class="line">      7844 TURNER的薪水是1500</span><br><span class="line">      7876 ADAMS的薪水是1100</span><br><span class="line">      7900 JAMES的薪水是950</span><br><span class="line">      7902 FORD的薪水是3000</span><br><span class="line">      7934 MILLER的薪水是1300</span><br><span class="line"></span><br><span class="line">已选择 15 行。</span><br></pre></td></tr></table></figure></p>
<h4 id="字符串截取substr-a-b"><a href="#字符串截取substr-a-b" class="headerlink" title="字符串截取substr(a,b)"></a>字符串截取<code>substr(a,b)</code></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --substr(a,b) 从a中，第b位开始取</span><br><span class="line">SQL&gt; select substr(&apos;Hello World&apos;,7)</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">SUBST</span><br><span class="line">-----</span><br><span class="line">World</span><br><span class="line"></span><br><span class="line">SQL&gt; --substr(a,b,c) 从a中，第b位开始取，取c位</span><br><span class="line">SQL&gt; select substr(&apos;Hello World&apos;,1,2)</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">SU</span><br><span class="line">--</span><br><span class="line">He</span><br></pre></td></tr></table></figure>
<h4 id="字符数-字节数的计算-length-lengthb"><a href="#字符数-字节数的计算-length-lengthb" class="headerlink" title="字符数/字节数的计算(length()/lengthb())"></a>字符数/字节数的计算(<code>length()</code>/<code>lengthb()</code>)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --对英文字母，1个字符有1个字节</span><br><span class="line">SQL&gt; select length(&apos;hello&apos;) 字符数,lengthb(&apos;hello&apos;) 字节数</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">    字符数     字节数</span><br><span class="line">---------- ----------</span><br><span class="line">         5          5</span><br><span class="line"></span><br><span class="line">SQL&gt; --对汉字,1个字符有2个字节</span><br><span class="line">SQL&gt; select length(&apos;你好&apos;) 字符数,lengthb(&apos;你好&apos;) 字节数</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">    字符数     字节数</span><br><span class="line">---------- ----------</span><br><span class="line">         2          4</span><br></pre></td></tr></table></figure>
<h4 id="字符串中查找子串-instr"><a href="#字符串中查找子串-instr" class="headerlink" title="字符串中查找子串(instr())"></a>字符串中查找子串(<code>instr()</code>)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --instr(a,b)</span><br><span class="line">SQL&gt; select instr(&apos;hello world&apos;,&apos;wo&apos;) wo子串起始位置</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">WO子串起始位置</span><br><span class="line">--------------</span><br><span class="line">             7</span><br></pre></td></tr></table></figure>
<h4 id="对字符串进行填充-lpad-rpad"><a href="#对字符串进行填充-lpad-rpad" class="headerlink" title="对字符串进行填充(lpad()/rpad)"></a>对字符串进行填充(<code>lpad()</code>/<code>rpad</code>)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --lpad()左填充 rpad()右填充</span><br><span class="line">SQL&gt; --lpad(a,b,c) a字符串 用c字符 填充至b位</span><br><span class="line">SQL&gt; select lpad(&apos;hello&apos;,10,&apos;*&apos;) 左填充,rpad(&apos;hello&apos;,10,&apos;*&apos;) 右填充</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">左填充     右填充</span><br><span class="line">---------- ----------</span><br><span class="line">*****hello hello*****</span><br></pre></td></tr></table></figure>
<h4 id="去除前后指定的字符-trim"><a href="#去除前后指定的字符-trim" class="headerlink" title="去除前后指定的字符(trim())"></a>去除前后指定的字符(<code>trim()</code>)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --trim 去掉前后指定的字符</span><br><span class="line">SQL&gt; --trim(a from b) 去除b字符串中前后的a</span><br><span class="line">SQL&gt; select trim(&apos;*&apos; from &apos;**Hello World*********&apos;) as &quot;去除前后*号 &quot;</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">去除前后*号</span><br><span class="line">-----------</span><br><span class="line">Hello World</span><br></pre></td></tr></table></figure>
<h4 id="字符串中字符替换-replace"><a href="#字符串中字符替换-replace" class="headerlink" title="字符串中字符替换(replace())"></a>字符串中字符替换(<code>replace()</code>)</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; replace(a,b,c) 将a中所有的b换成c</span><br><span class="line">SQL&gt; select replace(&apos;Hello World&apos;,&apos;l&apos;,&apos;*&apos;) &quot;将l替换为*&quot;</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">将l替换为*</span><br><span class="line">-----------</span><br><span class="line">He**o Wor*d</span><br></pre></td></tr></table></figure>
<h2 id="数字函数"><a href="#数字函数" class="headerlink" title="数字函数"></a>数字函数</h2><h3 id="四舍五入函数-round"><a href="#四舍五入函数-round" class="headerlink" title="四舍五入函数(round())"></a>四舍五入函数(<code>round()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select round(45.926,2) 一,round(45.926,1) 二,round(45.926,0) 三,round(45.926,-1) 四,round(45.926,-2) 五</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">        一         二         三         四         五</span><br><span class="line">---------- ---------- ---------- ---------- ----------</span><br><span class="line">     45.93       45.9         46         50          0</span><br></pre></td></tr></table></figure>
<h3 id="截断函数-trunc"><a href="#截断函数-trunc" class="headerlink" title="截断函数(trunc())"></a>截断函数(<code>trunc()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --trunc(a,b) a被截断的数 b从小数点后多少位开始截断</span><br><span class="line">SQL&gt; select trunc(45.926,2) 一,trunc(45.926,1) 二,trunc(45.926,0) 三,trunc(45.926,-1) 四,trunc(45.926,-2) 五</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">        一         二         三         四         五</span><br><span class="line">---------- ---------- ---------- ---------- ----------</span><br><span class="line">     45.92       45.9         45         40          0</span><br></pre></td></tr></table></figure>
<h3 id="求余函数-mod"><a href="#求余函数-mod" class="headerlink" title="求余函数(mod())"></a>求余函数(<code>mod()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select mod(1600,300)</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">MOD(1600,300)</span><br><span class="line">-------------</span><br><span class="line">          100</span><br></pre></td></tr></table></figure>
<h2 id="日期函数"><a href="#日期函数" class="headerlink" title="日期函数"></a>日期函数</h2><p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/12428923.jpg" alt=""></p>
<h3 id="返回当前时间-sysdate"><a href="#返回当前时间-sysdate" class="headerlink" title="返回当前时间(sysdate)"></a>返回当前时间(<code>sysdate</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select sysdate from dual;</span><br><span class="line"></span><br><span class="line">SYSDATE</span><br><span class="line">--------------</span><br><span class="line">08-7月 -18</span><br><span class="line"></span><br><span class="line">SQL&gt; --格式不方便查看 对其进行格式的转换</span><br><span class="line">SQL&gt; select to_char(sysdate,&apos;yyyy-mm-dd hh24:mi:ss&apos;)</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">TO_CHAR(SYSDATE,&apos;YY</span><br><span class="line">-------------------</span><br><span class="line">2018-07-08 02:29:29</span><br></pre></td></tr></table></figure>
<h3 id="日期的数学运算"><a href="#日期的数学运算" class="headerlink" title="日期的数学运算"></a>日期的数学运算</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select (sysdate-1) 昨天,sysdate 今天,(sysdate+1) 明天</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">昨天           今天           明天</span><br><span class="line">-------------- -------------- --------------</span><br><span class="line">07-7月 -18     08-7月 -18     09-7月 -18</span><br><span class="line"></span><br><span class="line">SQL&gt; --计算员工的工龄：天 星期  月 年</span><br><span class="line">SQL&gt; select ename,hiredate,(sysdate-hiredate) 天,(sysdate-hiredate)/7 星期,</span><br><span class="line">  2                        (sysdate-hiredate)/30 月,(sysdate-hiredate)/365 年</span><br><span class="line">  3  from emp;</span><br><span class="line"></span><br><span class="line">ENAME      HIREDATE               天       星期         月         年</span><br><span class="line">---------- -------------- ---------- ---------- ---------- ----------</span><br><span class="line">Tom_AB</span><br><span class="line">SMITH      17-12月-80     13717.1055  1959.5865 457.236851  37.581111</span><br><span class="line">ALLEN      20-2月 -81     13652.1055 1950.30079 455.070184 37.4030288</span><br><span class="line">WARD       22-2月 -81     13650.1055 1950.01507 455.003517 37.3975494</span><br><span class="line">JONES      02-4月 -81     13611.1055 1944.44365 453.703517 37.2907001</span><br><span class="line">MARTIN     28-9月 -81     13432.1055 1918.87222 447.736851 36.8002891</span><br><span class="line">BLAKE      01-5月 -81     13582.1055 1940.30079 452.736851  37.211248</span><br><span class="line">CLARK      09-6月 -81     13543.1055 1934.72936 451.436851 37.1043987</span><br><span class="line">SCOTT      19-4月 -87     11403.1055 1629.01507 380.103517  31.241385</span><br><span class="line">KING       17-11月-81     13382.1055 1911.72936 446.070184 36.6633028</span><br><span class="line">TURNER     08-9月 -81     13452.1055 1921.72936 448.403517 36.8550836</span><br><span class="line">ADAMS      23-5月 -87     11369.1055 1624.15793 378.970184 31.1482343</span><br><span class="line">JAMES      03-12月-81     13366.1055 1909.44365 445.536851 36.6194672</span><br><span class="line">FORD       03-12月-81     13366.1055 1909.44365 445.536851 36.6194672</span><br><span class="line">MILLER     23-1月 -82     13315.1055 1902.15793 443.836851 36.4797412</span><br><span class="line"></span><br><span class="line">已选择 15 行。</span><br><span class="line"></span><br><span class="line">SQL&gt; --不允许使用日期+日期</span><br><span class="line">SQL&gt; select sysdate+hiredate from emp;</span><br><span class="line">select sysdate+hiredate from emp</span><br><span class="line">              *</span><br><span class="line">第 1 行出现错误: </span><br><span class="line">ORA-00975: 不允许日期 + 日期</span><br></pre></td></tr></table></figure>
<h3 id="两个月相差的月数-months-between"><a href="#两个月相差的月数-months-between" class="headerlink" title="两个月相差的月数(months_between())"></a>两个月相差的月数(<code>months_between()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --查看员工入职月数</span><br><span class="line">SQL&gt; --使用months_between计算相差月数误差更小</span><br><span class="line">SQL&gt; select ename hiredate,(sysdate-hiredate)/30 一,months_between(sysdate,hiredate) 二</span><br><span class="line">  2  from emp;</span><br><span class="line"></span><br><span class="line">HIREDATE           一         二</span><br><span class="line">---------- ---------- ----------</span><br><span class="line">Tom_AB</span><br><span class="line">SMITH      457.236909 450.713137</span><br><span class="line">ALLEN      455.070242 448.616363</span><br><span class="line">WARD       455.003575 448.551847</span><br><span class="line">JONES      453.703575 447.197008</span><br><span class="line">MARTIN     447.736909 441.358299</span><br><span class="line">BLAKE      452.736909 446.229266</span><br><span class="line">CLARK      451.436909 444.971202</span><br><span class="line">SCOTT      380.103575 374.648621</span><br><span class="line">KING       446.070242 439.713137</span><br><span class="line">TURNER     448.403575        442</span><br><span class="line">ADAMS      378.970242 373.519589</span><br><span class="line">JAMES      445.536909  439.16475</span><br><span class="line">FORD       445.536909  439.16475</span><br><span class="line">MILLER     443.836909 437.519589</span><br><span class="line"></span><br><span class="line">已选择 15 行。</span><br></pre></td></tr></table></figure>
<h3 id="指定日期加上若干月数-add-months"><a href="#指定日期加上若干月数-add-months" class="headerlink" title="指定日期加上若干月数(add_months())"></a>指定日期加上若干月数(<code>add_months()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --10个月后</span><br><span class="line">SQL&gt; select sysdate &quot;今天&quot;,add_months(sysdate,10) &quot;10个月之后&quot;</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">今天           10个月之后</span><br><span class="line">-------------- --------------</span><br><span class="line">08-7月 -18     08-5月 -19</span><br></pre></td></tr></table></figure>
<h3 id="指定星期的下一个日期-next-day"><a href="#指定星期的下一个日期-next-day" class="headerlink" title="指定星期的下一个日期(next_day())"></a>指定星期的下一个日期(<code>next_day()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">今天           10个月之后</span><br><span class="line">-------------- --------------</span><br><span class="line">08-7月 -18     08-5月 -19</span><br><span class="line"></span><br><span class="line">SQL&gt; --下个星期四</span><br><span class="line">SQL&gt; select next_day(sysdate,&apos;星期四&apos;)</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">NEXT_DAY(SYSDA</span><br><span class="line">--------------</span><br><span class="line">12-7月 -18</span><br><span class="line"></span><br><span class="line">SQL&gt; select next_day(sysdate,&apos;星期4&apos;)</span><br><span class="line">  2  from dual;</span><br><span class="line">select next_day(sysdate,&apos;星期4&apos;)</span><br><span class="line">                        *</span><br><span class="line">第 1 行出现错误:</span><br><span class="line">ORA-01846: 周中的日无效</span><br><span class="line"></span><br><span class="line">SQL&gt; /*</span><br><span class="line">SQL&gt; next_day函数的应用：每个星期一自动备份表中的数据</span><br><span class="line">SQL&gt; 1、分布式数据库</span><br><span class="line">SQL&gt; 2、触发器 快照</span><br><span class="line">SQL&gt; */</span><br></pre></td></tr></table></figure>
<h3 id="查看本月最后一天-last-day"><a href="#查看本月最后一天-last-day" class="headerlink" title="查看本月最后一天(last_day)"></a>查看本月最后一天(<code>last_day</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select last_day(sysdate) 本月最后一天</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">本月最后一天</span><br><span class="line">--------------</span><br><span class="line">31-7月 -18</span><br></pre></td></tr></table></figure>
<h3 id="日期四舍五入-round"><a href="#日期四舍五入-round" class="headerlink" title="日期四舍五入(round())"></a>日期四舍五入(<code>round()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select round(sysdate,&apos;month&apos;) 日四舍五入,round(sysdate,&apos;year&apos;) 月四舍五入</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">日四舍五入     月四舍五入</span><br><span class="line">-------------- --------------</span><br><span class="line">01-7月 -18     01-1月 -19</span><br></pre></td></tr></table></figure>
<h3 id="日期截断-trunc"><a href="#日期截断-trunc" class="headerlink" title="日期截断(trunc())"></a>日期截断(<code>trunc()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select trunc(sysdate,&apos;month&apos;) 按日截断,trunc(sysdate,&apos;year&apos;) 按月截断</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">按日截断       按月截断</span><br><span class="line">-------------- --------------</span><br><span class="line">01-7月 -18     01-1月 -18</span><br></pre></td></tr></table></figure>
<h2 id="转换函数"><a href="#转换函数" class="headerlink" title="转换函数"></a>转换函数</h2><p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/81252686.jpg" alt=""></p>
<h3 id="日期转字符-to-char"><a href="#日期转字符-to-char" class="headerlink" title="日期转字符(to_char())"></a>日期转字符(<code>to_char()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select to_char(sysdate,&apos;yyyy-mm-dd hh24:mi:ss&quot;今天是&quot;day&apos;)</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">TO_CHAR(SYSDATE,&apos;YYYY-MM-DDHH24:MI</span><br><span class="line">----------------------------------</span><br><span class="line">2018-07-08 03:10:22今天是星期日</span><br></pre></td></tr></table></figure>
<h3 id="字符转日期-to-date"><a href="#字符转日期-to-date" class="headerlink" title="字符转日期(to_date())"></a>字符转日期(<code>to_date()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; to_date(a,b) a为字符串，b为日期转字符串a的转换格式</span><br><span class="line">SQL&gt; select to_date(&apos;2018-07-08 03:10:22今天是星期日&apos;,&apos;yyyy-mm-dd hh24,mi,ss&quot;今天是&quot;day&apos;) 今天日期</span><br><span class="line">  2  from dual;</span><br><span class="line"></span><br><span class="line">今天日期</span><br><span class="line">--------------</span><br><span class="line">08-7月 -18</span><br></pre></td></tr></table></figure>
<h3 id="数值转字符-“to-char”"><a href="#数值转字符-“to-char”" class="headerlink" title="数值转字符(“to_char”)"></a>数值转字符(“to_char”)</h3><p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/40181007.jpg" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select empno,ename,to_char(sal,&apos;L9,999.99&apos;) 员工薪水</span><br><span class="line">  2  from emp;</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME      员工薪水</span><br><span class="line">---------- ---------- -------------------</span><br><span class="line">      1001 Tom_AB              ￥3,000.00</span><br><span class="line">      7369 SMITH                 ￥800.00</span><br><span class="line">      7499 ALLEN               ￥1,600.00</span><br><span class="line">      7521 WARD                ￥1,250.00</span><br><span class="line">      7566 JONES               ￥2,975.00</span><br><span class="line">      7654 MARTIN              ￥1,250.00</span><br><span class="line">      7698 BLAKE               ￥2,850.00</span><br><span class="line">      7782 CLARK               ￥2,450.00</span><br><span class="line">      7788 SCOTT               ￥3,000.00</span><br><span class="line">      7839 KING                ￥5,000.00</span><br><span class="line">      7844 TURNER              ￥1,500.00</span><br><span class="line">      7876 ADAMS               ￥1,100.00</span><br><span class="line">      7900 JAMES                 ￥950.00</span><br><span class="line">      7902 FORD                ￥3,000.00</span><br><span class="line">      7934 MILLER              ￥1,300.00</span><br><span class="line"></span><br><span class="line">已选择 15 行。</span><br></pre></td></tr></table></figure></p>
<h3 id="字符转数值"><a href="#字符转数值" class="headerlink" title="字符转数值"></a>字符转数值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; to_number(a,b) a为字符串，b为数值转a的转换格式</span><br><span class="line">SQL&gt; select empno,ename,员工薪水,to_number(员工薪水,&apos;L9,999.99&apos;) 原格式薪水</span><br><span class="line">  2  from (select empno,ename,to_char(sal,&apos;L9,999.99&apos;) 员工薪水 from emp);</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME      员工薪水            原格式薪水</span><br><span class="line">---------- ---------- ------------------- ----------</span><br><span class="line">      1001 Tom_AB              ￥3,000.00       3000</span><br><span class="line">      7369 SMITH                 ￥800.00        800</span><br><span class="line">      7499 ALLEN               ￥1,600.00       1600</span><br><span class="line">      7521 WARD                ￥1,250.00       1250</span><br><span class="line">      7566 JONES               ￥2,975.00       2975</span><br><span class="line">      7654 MARTIN              ￥1,250.00       1250</span><br><span class="line">      7698 BLAKE               ￥2,850.00       2850</span><br><span class="line">      7782 CLARK               ￥2,450.00       2450</span><br><span class="line">      7788 SCOTT               ￥3,000.00       3000</span><br><span class="line">      7839 KING                ￥5,000.00       5000</span><br><span class="line">      7844 TURNER              ￥1,500.00       1500</span><br><span class="line">      7876 ADAMS               ￥1,100.00       1100</span><br><span class="line">      7900 JAMES                 ￥950.00        950</span><br><span class="line">      7902 FORD                ￥3,000.00       3000</span><br><span class="line">      7934 MILLER              ￥1,300.00       1300</span><br><span class="line"></span><br><span class="line">已选择 15 行。</span><br></pre></td></tr></table></figure>
<h2 id="通用函数"><a href="#通用函数" class="headerlink" title="通用函数"></a>通用函数</h2><p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/49314554.jpg" alt=""><br><strong>这些函数适用于任何值，同时也适用于空值</strong></p>
<h3 id="滤空函数（nvl-）"><a href="#滤空函数（nvl-）" class="headerlink" title="滤空函数（nvl()）"></a>滤空函数（<code>nvl()</code>）</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --查询员工信息：员工号 姓名 月薪 年薪 奖金 年收入</span><br><span class="line">SQL&gt; select empno,ename,sal,sal*12,comm,sal*12+comm</span><br><span class="line">  2  from emp;</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME             SAL     SAL*12       COMM SAL*12+COMM</span><br><span class="line">---------- ---------- ---------- ---------- ---------- -----------</span><br><span class="line">      7369 SMITH             800       9600</span><br><span class="line">      7499 ALLEN            1600      19200        300       19500</span><br><span class="line">      7521 WARD             1250      15000        500       15500</span><br><span class="line">      7566 JONES            2975      35700</span><br><span class="line">      7654 MARTIN           1250      15000       1400       16400</span><br><span class="line">      7698 BLAKE            2850      34200</span><br><span class="line">      7782 CLARK            2450      29400</span><br><span class="line">      7788 SCOTT            3000      36000</span><br><span class="line">      7839 KING             5000      60000</span><br><span class="line">      7844 TURNER           1500      18000          0       18000</span><br><span class="line">      7876 ADAMS            1100      13200</span><br><span class="line">      7900 JAMES             950      11400</span><br><span class="line">      7902 FORD             3000      36000</span><br><span class="line">      7934 MILLER           1300      15600</span><br><span class="line"></span><br><span class="line">14 rows selected.</span><br><span class="line">SQL&gt; --可以发现 上面查询的数据是有问题的 奖金为null的员工 年收入也显示为null了</span><br><span class="line">SQL&gt; /*</span><br><span class="line">SQL&gt; Oracle当中的null</span><br><span class="line">SQL&gt; 1.包含null的表达式都为null</span><br><span class="line">SQL&gt; 2.null永远都!=null</span><br><span class="line">SQL&gt; */</span><br><span class="line">SQL&gt; --为了显示正确的查询结果 我们需要使用滤空函数nvl(a,b)</span><br><span class="line">SQL&gt; --a表示需要滤空的列名 b表示若被滤空则显示b</span><br><span class="line">SQL&gt; select empno,ename,sal,sal*12,nvl(comm,0),sal*12+nvl(comm,0)</span><br><span class="line">  2  from emp;</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME             SAL     SAL*12 NVL(COMM,0) SAL*12+NVL(COMM,0)</span><br><span class="line">---------- ---------- ---------- ---------- ----------- ------------------</span><br><span class="line">      7369 SMITH             800       9600           0               9600</span><br><span class="line">      7499 ALLEN            1600      19200         300              19500</span><br><span class="line">      7521 WARD             1250      15000         500              15500</span><br><span class="line">      7566 JONES            2975      35700           0              35700</span><br><span class="line">      7654 MARTIN           1250      15000        1400              16400</span><br><span class="line">      7698 BLAKE            2850      34200           0              34200</span><br><span class="line">      7782 CLARK            2450      29400           0              29400</span><br><span class="line">      7788 SCOTT            3000      36000           0              36000</span><br><span class="line">      7839 KING             5000      60000           0              60000</span><br><span class="line">      7844 TURNER           1500      18000           0              18000</span><br><span class="line">      7876 ADAMS            1100      13200           0              13200</span><br><span class="line">      7900 JAMES             950      11400           0              11400</span><br><span class="line">      7902 FORD             3000      36000           0              36000</span><br><span class="line">      7934 MILLER           1300      15600           0              15600</span><br><span class="line"></span><br><span class="line">14 rows selected.</span><br></pre></td></tr></table></figure>
<h3 id="增强的滤空函数-nvl2"><a href="#增强的滤空函数-nvl2" class="headerlink" title="增强的滤空函数(nvl2())"></a>增强的滤空函数(<code>nvl2()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --nvl2(a,b,c) 当a=null的时候，返回c；否则返回b</span><br><span class="line">SQL&gt; select empno,ename,sal,sal*12,nvl2(comm,comm,0),sal*12+nvl2(comm,comm,0)</span><br><span class="line">  2  from emp;</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME             SAL     SAL*12 NVL2(COMM,COMM,0) SAL*12+NVL2(COMM,COMM,0)</span><br><span class="line">---------- ---------- ---------- ---------- ----------------- ------------------------</span><br><span class="line">      1001 Tom_AB           3000      36000                 0                    36000</span><br><span class="line">      7369 SMITH             800       9600                 0                     9600</span><br><span class="line">      7499 ALLEN            1600      19200               300                    19500</span><br><span class="line">      7521 WARD             1250      15000               500                    15500</span><br><span class="line">      7566 JONES            2975      35700                 0                    35700</span><br><span class="line">      7654 MARTIN           1250      15000              1400                    16400</span><br><span class="line">      7698 BLAKE            2850      34200                 0                    34200</span><br><span class="line">      7782 CLARK            2450      29400                 0                    29400</span><br><span class="line">      7788 SCOTT            3000      36000                 0                    36000</span><br><span class="line">      7839 KING             5000      60000                 0                    60000</span><br><span class="line">      7844 TURNER           1500      18000                 0                    18000</span><br><span class="line">      7876 ADAMS            1100      13200                 0                    13200</span><br><span class="line">      7900 JAMES             950      11400                 0                    11400</span><br><span class="line">      7902 FORD             3000      36000                 0                    36000</span><br><span class="line">      7934 MILLER           1300      15600                 0                    15600</span><br><span class="line"></span><br><span class="line">已选择 15 行。</span><br></pre></td></tr></table></figure>
<h3 id="判断两值是否相等-nullif"><a href="#判断两值是否相等-nullif" class="headerlink" title="判断两值是否相等(nullif())"></a>判断两值是否相等(<code>nullif()</code>)</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --nullif(a,b) 当a=b的时候，返回null；否则返回a</span><br><span class="line">SQL&gt; select nullif(&apos;abc&apos;,&apos;abc&apos;) 值 from dual;</span><br><span class="line"></span><br><span class="line">值</span><br><span class="line">---</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SQL&gt; select nullif(&apos;abc&apos;,&apos;abcd&apos;) 值 from dual;</span><br><span class="line"></span><br><span class="line">值                                                                             </span><br><span class="line">---                                                                            </span><br><span class="line">abc</span><br></pre></td></tr></table></figure>
<h3 id="从左到右，寻找第一个不为空的值"><a href="#从左到右，寻找第一个不为空的值" class="headerlink" title="从左到右，寻找第一个不为空的值"></a>从左到右，寻找第一个不为空的值</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --coalesce 从左到右 找到第一个不为null的值</span><br><span class="line">SQL&gt; select comm,sal,coalesce(comm,sal) &quot;第一个不为null的值&quot;</span><br><span class="line">  2  from emp;</span><br><span class="line"></span><br><span class="line">      COMM        SAL 第一个不为null的值</span><br><span class="line">---------- ---------- ------------------</span><br><span class="line">                 3000               3000</span><br><span class="line">                  800                800</span><br><span class="line">       300       1600                300</span><br><span class="line">       500       1250                500</span><br><span class="line">                 2975               2975</span><br><span class="line">      1400       1250               1400</span><br><span class="line">                 2850               2850</span><br><span class="line">                 2450               2450</span><br><span class="line">                 3000               3000</span><br><span class="line">                 5000               5000</span><br><span class="line">         0       1500                  0</span><br><span class="line">                 1100               1100</span><br><span class="line">                  950                950</span><br><span class="line">                 3000               3000</span><br><span class="line">                 1300               1300</span><br><span class="line"></span><br><span class="line">已选择 15 行。</span><br></pre></td></tr></table></figure>
<h2 id="case表达式"><a href="#case表达式" class="headerlink" title="case表达式"></a><code>case</code>表达式</h2><p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/62538311.jpg" alt=""><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">SELECT</span><br><span class="line">	-- 简单 CASE 语句（Simple CASE）</span><br><span class="line">    CASE GENDER  </span><br><span class="line">        WHEN 1 THEN &apos;男&apos;  </span><br><span class="line">        ELSE &apos;女&apos;  </span><br><span class="line">    END AS GENDER,</span><br><span class="line"> </span><br><span class="line">	-- 查询 CASE 语句（Searched CASE）</span><br><span class="line">    CASE   </span><br><span class="line">        WHEN GENDER = 1 THEN &apos;男&apos;  </span><br><span class="line">        ELSE &apos;女&apos;  </span><br><span class="line">    END AS GENDER</span><br><span class="line">	</span><br><span class="line">FROM USER_INFO;</span><br></pre></td></tr></table></figure></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --给员工涨工资，总裁1000 经理800 其他400</span><br><span class="line">SQL&gt; select ename,job,sal 涨前,</span><br><span class="line">  2         case job when &apos;PRESIDENT&apos; then sal+1000</span><br><span class="line">  3                  when  &apos;MANAGER&apos; then sal+800</span><br><span class="line">  4                  else sal+400</span><br><span class="line">  5         end 涨后</span><br><span class="line">  6  from emp;</span><br><span class="line"></span><br><span class="line">ENAME      JOB             涨前       涨后</span><br><span class="line">---------- --------- ---------- ----------</span><br><span class="line">Tom_AB     CLERK           3000       3400</span><br><span class="line">SMITH      CLERK            800       1200</span><br><span class="line">ALLEN      SALESMAN        1600       2000</span><br><span class="line">WARD       SALESMAN        1250       1650</span><br><span class="line">JONES      MANAGER         2975       3775</span><br><span class="line">MARTIN     SALESMAN        1250       1650</span><br><span class="line">BLAKE      MANAGER         2850       3650</span><br><span class="line">CLARK      MANAGER         2450       3250</span><br><span class="line">SCOTT      ANALYST         3000       3400</span><br><span class="line">KING       PRESIDENT       5000       6000</span><br><span class="line">TURNER     SALESMAN        1500       1900</span><br><span class="line">ADAMS      CLERK           1100       1500</span><br><span class="line">JAMES      CLERK            950       1350</span><br><span class="line">FORD       ANALYST         3000       3400</span><br><span class="line">MILLER     CLERK           1300       1700</span><br><span class="line"></span><br><span class="line">已选择 15 行。</span><br></pre></td></tr></table></figure>
<h2 id="decode表达式"><a href="#decode表达式" class="headerlink" title="decode表达式"></a><code>decode</code>表达式</h2><p><img src="https://hexoblog-1257009793.cos.ap-shanghai.myqcloud.com/18-7-14/29860265.jpg" alt=""><br><code>SELECT DECODE(GENDER, 1, &#39;男&#39;, 2, &#39;女&#39;, &#39;未知&#39;) FROM USER_INFO;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --给员工涨工资，总裁1000 经理800 其他400</span><br><span class="line">SQL&gt; select ename,job,sal 涨前,</span><br><span class="line">  2         decode(job,&apos;PRESIDENT&apos;,sal+1000,</span><br><span class="line">  3                    &apos;MANAGER&apos;,sal+800,</span><br><span class="line">  4                              sal+400) 涨后</span><br><span class="line">  5  from emp;</span><br><span class="line"></span><br><span class="line">ENAME      JOB             涨前       涨后</span><br><span class="line">---------- --------- ---------- ----------</span><br><span class="line">Tom_AB                     3000       3400</span><br><span class="line">SMITH      CLERK            800       1200</span><br><span class="line">ALLEN      SALESMAN        1600       2000</span><br><span class="line">WARD       SALESMAN        1250       1650</span><br><span class="line">JONES      MANAGER         2975       3775</span><br><span class="line">MARTIN     SALESMAN        1250       1650</span><br><span class="line">BLAKE      MANAGER         2850       3650</span><br><span class="line">CLARK      MANAGER         2450       3250</span><br><span class="line">SCOTT      ANALYST         3000       3400</span><br><span class="line">KING       PRESIDENT       5000       6000</span><br><span class="line">TURNER     SALESMAN        1500       1900</span><br><span class="line">ADAMS      CLERK           1100       1500</span><br><span class="line">JAMES      CLERK            950       1350</span><br><span class="line">FORD       ANALYST         3000       3400</span><br><span class="line">MILLER     CLERK           1300       1700</span><br><span class="line"></span><br><span class="line">已选择 15 行。</span><br></pre></td></tr></table></figure>
<hr>
<h1 id="分组函数"><a href="#分组函数" class="headerlink" title="分组函数"></a>分组函数</h1><p><strong>分组函数</strong> 作用于一组数据，并对一组数据返回一个值</p>
<h2 id="求和-SUM"><a href="#求和-SUM" class="headerlink" title="求和(SUM())"></a>求和(<code>SUM()</code>)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --工资总额</span><br><span class="line">SQL&gt; select sum(sal)</span><br><span class="line">  2  from emp;</span><br><span class="line"></span><br><span class="line">  SUM(SAL)</span><br><span class="line">----------</span><br><span class="line">     32025</span><br></pre></td></tr></table></figure>
<h2 id="求匹配指定条件的行数-COUNT"><a href="#求匹配指定条件的行数-COUNT" class="headerlink" title="求匹配指定条件的行数(COUNT())"></a>求匹配指定条件的行数(<code>COUNT()</code>)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --求公司人数</span><br><span class="line">SQL&gt; select count(*)</span><br><span class="line">  2  from emp;</span><br><span class="line"></span><br><span class="line">  COUNT(*)</span><br><span class="line">----------</span><br><span class="line">        15</span><br></pre></td></tr></table></figure>
<h2 id="求平均数-AVG"><a href="#求平均数-AVG" class="headerlink" title="求平均数(AVG())"></a>求平均数(<code>AVG()</code>)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --求公司平均工资</span><br><span class="line">SQL&gt; select sum(sal)/count(*) 一,avg(sal) 二</span><br><span class="line">  2  from emp;</span><br><span class="line"></span><br><span class="line">        一         二</span><br><span class="line">---------- ----------</span><br><span class="line">      2135       2135</span><br><span class="line"></span><br><span class="line">SQL&gt; --平均奖金</span><br><span class="line">SQL&gt; select sum(comm)/count(*) 一,sum(comm)/count(comm) 二,avg(comm) 三</span><br><span class="line">2  from emp;</span><br><span class="line"></span><br><span class="line">        一         二         三</span><br><span class="line">---------- ---------- ----------</span><br><span class="line">146.666667        550        550</span><br><span class="line">SQL&gt; --一求出来的是全公司的员工奖金</span><br><span class="line">SQL&gt; --二、三求出来的是全公司有奖金的员工的平均奖金</span><br></pre></td></tr></table></figure>
<h2 id="求最大值-MAX"><a href="#求最大值-MAX" class="headerlink" title="求最大值(MAX())"></a>求最大值(<code>MAX()</code>)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --全公司最高工资</span><br><span class="line">SQL&gt; select max(sal)</span><br><span class="line">  2  from emp;</span><br><span class="line"></span><br><span class="line">  MAX(SAL)</span><br><span class="line">----------</span><br><span class="line">      5000</span><br></pre></td></tr></table></figure>
<h2 id="求最小值-MIN"><a href="#求最小值-MIN" class="headerlink" title="求最小值(MIN())"></a>求最小值(<code>MIN()</code>)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --全公司最低工资</span><br><span class="line">SQL&gt; select min(sal)</span><br><span class="line">  2  from emp;</span><br><span class="line"></span><br><span class="line">  MIN(SAL)</span><br><span class="line">----------</span><br><span class="line">       800</span><br></pre></td></tr></table></figure>
<h2 id="多个列的分组-group-by"><a href="#多个列的分组-group-by" class="headerlink" title="多个列的分组(group by)"></a>多个列的分组(<code>group by</code>)</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --多个列的分组: 先按照第一个列分组，如果相同，再第二个列分组，以此类推</span><br><span class="line">SQL&gt; --查询平均工资大于2000的部门</span><br><span class="line">SQL&gt; select deptno,avg(sal)</span><br><span class="line">  2  from emp</span><br><span class="line">  3  group by deptno</span><br><span class="line">  4  having avg(sal)&gt;2000;</span><br><span class="line"></span><br><span class="line">    DEPTNO   AVG(SAL)</span><br><span class="line">---------- ----------</span><br><span class="line">        20       2175</span><br><span class="line">        10     2937.5</span><br><span class="line"></span><br><span class="line">SQL&gt; --where和having的区别：where不能使用多行函数</span><br><span class="line">SQL&gt; select deptno,avg(sal)</span><br><span class="line">  2  from emp</span><br><span class="line">  3  where avg(sal)&gt;2000</span><br><span class="line">  4  group by deptno;</span><br><span class="line">where avg(sal)&gt;2000</span><br><span class="line">      *</span><br><span class="line">第 3 行出现错误:</span><br><span class="line">ORA-00934: 此处不允许使用分组函数</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：所有包含于select列表中，而未包含于组函数中的列都必须包含于group by字句中<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; select empno,ename,sal,comm,count(*)</span><br><span class="line">  2  from emp;</span><br><span class="line">select empno,ename,sal,comm,count(*)</span><br><span class="line">       *</span><br><span class="line">第 1 行出现错误:</span><br><span class="line">ORA-00937: 不是单组分组函数</span><br><span class="line"></span><br><span class="line">SQL&gt; --empno,ename,sal,comm,包含在select列表中，但是未包含于group by中</span><br><span class="line">SQL&gt; select empno,ename,sal,comm,count(*)</span><br><span class="line">  2  from emp</span><br><span class="line">  3  group by empno,ename,sal,comm;</span><br><span class="line"></span><br><span class="line">     EMPNO ENAME             SAL       COMM   COUNT(*)</span><br><span class="line">---------- ---------- ---------- ---------- ----------</span><br><span class="line">      7566 JONES            2975                     1</span><br><span class="line">      7934 MILLER           1300                     1</span><br><span class="line">      7499 ALLEN            1600        300          1</span><br><span class="line">      7521 WARD             1250        500          1</span><br><span class="line">      7788 SCOTT            3000                     1</span><br><span class="line">      7900 JAMES             950                     1</span><br><span class="line">      1001 Tom_AB           3000                     1</span><br><span class="line">      7369 SMITH             800                     1</span><br><span class="line">      7844 TURNER           1500          0          1</span><br><span class="line">      7698 BLAKE            2850                     1</span><br><span class="line">      7876 ADAMS            1100                     1</span><br><span class="line">      7902 FORD             3000                     1</span><br><span class="line">      7654 MARTIN           1250       1400          1</span><br><span class="line">      7782 CLARK            2450                     1</span><br><span class="line">      7839 KING             5000                     1</span><br><span class="line"></span><br><span class="line">已选择 15 行。</span><br></pre></td></tr></table></figure></p>
<h2 id="group-by的增强（rollup-）"><a href="#group-by的增强（rollup-）" class="headerlink" title="group by的增强（rollup()）"></a><code>group by</code>的增强（<code>rollup()</code>）</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">group by rollup(a,b)</span><br><span class="line">=</span><br><span class="line">group by a,b</span><br><span class="line">+</span><br><span class="line">group by a</span><br><span class="line">+</span><br><span class="line">没有group by</span><br></pre></td></tr></table></figure>
<p>效果如下:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">SQL&gt; --break on column  在该列上中断</span><br><span class="line">SQL&gt; --skip n  跳过n行</span><br><span class="line">SQL&gt; break on deptno skip 2 </span><br><span class="line">SQL&gt; select deptno,job,sum(sal) from emp group by rollup(deptno,job);</span><br><span class="line"></span><br><span class="line">    DEPTNO JOB         SUM(SAL)</span><br><span class="line">---------- --------- ----------</span><br><span class="line">        10                 3000</span><br><span class="line">           CLERK           1300</span><br><span class="line">           MANAGER         2450</span><br><span class="line">           PRESIDENT       5000</span><br><span class="line">                          11750</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        20 CLERK           1900</span><br><span class="line">           ANALYST         6000</span><br><span class="line">           MANAGER         2975</span><br><span class="line">                          10875</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        30 CLERK            950</span><br><span class="line">           MANAGER         2850</span><br><span class="line">           SALESMAN        5600</span><br><span class="line">                           9400</span><br><span class="line"></span><br><span class="line">                          32025</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SQL&gt; --取消掉上面的break on deptno skip 2 </span><br><span class="line">SQL&gt; break on null</span><br><span class="line">SQL&gt; select deptno,job,sum(sal) from emp group by rollup(deptno,job);</span><br><span class="line"></span><br><span class="line">    DEPTNO JOB         SUM(SAL)</span><br><span class="line">---------- --------- ----------</span><br><span class="line">        10                 3000</span><br><span class="line">        10 CLERK           1300</span><br><span class="line">        10 MANAGER         2450</span><br><span class="line">        10 PRESIDENT       5000</span><br><span class="line">        10                11750</span><br><span class="line">        20 CLERK           1900</span><br><span class="line">        20 ANALYST         6000</span><br><span class="line">        20 MANAGER         2975</span><br><span class="line">        20                10875</span><br><span class="line">        30 CLERK            950</span><br><span class="line">        30 MANAGER         2850</span><br><span class="line">        30 SALESMAN        5600</span><br><span class="line">        30                 9400</span><br><span class="line">                          32025</span><br><span class="line"></span><br><span class="line">已选择 14 行。</span><br></pre></td></tr></table></figure></p>

      
    </div>
    
    
    

  <div>
    
    <div>
    
        <div style="text-align:center;color: #555;font-size:14px;">-------------The End-------------</div>
    
</div>
    
  </div>

    

    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/Oracle/" rel="tag"><i class="fa fa-tag"></i>Oracle</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2018/07/08/Oracle(1)入门、基本操作、过滤排序/" rel="next" title="Oracle(1)入门、基本操作、过滤排序">
                <i class="fa fa-chevron-left"></i> Oracle(1)入门、基本操作、过滤排序
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2018/07/10/Oracle(3)多表查询、子查询、集合运算/" rel="prev" title="Oracle(3)多表查询、子查询、集合运算">
                Oracle(3)多表查询、子查询、集合运算 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Table of Contents
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Overview
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpg"
                alt="JiachengLai" />
            
              <p class="site-author-name" itemprop="name">JiachengLai</p>
              <p class="site-description motion-element" itemprop="description">纸上得来终觉浅，绝知此事要躬行</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives/">
              
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/categories/index.html">
                  <span class="site-state-item-count">7</span>
                  <span class="site-state-item-name">categories</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">9</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#单行函数"><span class="nav-number">1.</span> <span class="nav-text">单行函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#字符函数"><span class="nav-number">1.1.</span> <span class="nav-text">字符函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#大小写控制函数"><span class="nav-number">1.1.1.</span> <span class="nav-text">大小写控制函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#字符转小写lower"><span class="nav-number">1.1.1.1.</span> <span class="nav-text">字符转小写lower()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字符转大写upper"><span class="nav-number">1.1.1.2.</span> <span class="nav-text">字符转大写upper()</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#首字母大写initcap"><span class="nav-number">1.1.1.3.</span> <span class="nav-text">首字母大写initcap()</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符控制函数"><span class="nav-number">1.1.2.</span> <span class="nav-text">字符控制函数</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#字符串拼接-concat"><span class="nav-number">1.1.2.1.</span> <span class="nav-text">字符串拼接(concat())</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字段合并-wm-concat"><span class="nav-number">1.1.2.2.</span> <span class="nav-text">字段合并(wm_concat())</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#连接符"><span class="nav-number">1.1.2.3.</span> <span class="nav-text">连接符(||)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字符串截取substr-a-b"><span class="nav-number">1.1.2.4.</span> <span class="nav-text">字符串截取substr(a,b)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字符数-字节数的计算-length-lengthb"><span class="nav-number">1.1.2.5.</span> <span class="nav-text">字符数/字节数的计算(length()/lengthb())</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字符串中查找子串-instr"><span class="nav-number">1.1.2.6.</span> <span class="nav-text">字符串中查找子串(instr())</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#对字符串进行填充-lpad-rpad"><span class="nav-number">1.1.2.7.</span> <span class="nav-text">对字符串进行填充(lpad()/rpad)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#去除前后指定的字符-trim"><span class="nav-number">1.1.2.8.</span> <span class="nav-text">去除前后指定的字符(trim())</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#字符串中字符替换-replace"><span class="nav-number">1.1.2.9.</span> <span class="nav-text">字符串中字符替换(replace())</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#数字函数"><span class="nav-number">1.2.</span> <span class="nav-text">数字函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#四舍五入函数-round"><span class="nav-number">1.2.1.</span> <span class="nav-text">四舍五入函数(round())</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#截断函数-trunc"><span class="nav-number">1.2.2.</span> <span class="nav-text">截断函数(trunc())</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#求余函数-mod"><span class="nav-number">1.2.3.</span> <span class="nav-text">求余函数(mod())</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#日期函数"><span class="nav-number">1.3.</span> <span class="nav-text">日期函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#返回当前时间-sysdate"><span class="nav-number">1.3.1.</span> <span class="nav-text">返回当前时间(sysdate)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日期的数学运算"><span class="nav-number">1.3.2.</span> <span class="nav-text">日期的数学运算</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#两个月相差的月数-months-between"><span class="nav-number">1.3.3.</span> <span class="nav-text">两个月相差的月数(months_between())</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指定日期加上若干月数-add-months"><span class="nav-number">1.3.4.</span> <span class="nav-text">指定日期加上若干月数(add_months())</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#指定星期的下一个日期-next-day"><span class="nav-number">1.3.5.</span> <span class="nav-text">指定星期的下一个日期(next_day())</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#查看本月最后一天-last-day"><span class="nav-number">1.3.6.</span> <span class="nav-text">查看本月最后一天(last_day)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日期四舍五入-round"><span class="nav-number">1.3.7.</span> <span class="nav-text">日期四舍五入(round())</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#日期截断-trunc"><span class="nav-number">1.3.8.</span> <span class="nav-text">日期截断(trunc())</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#转换函数"><span class="nav-number">1.4.</span> <span class="nav-text">转换函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#日期转字符-to-char"><span class="nav-number">1.4.1.</span> <span class="nav-text">日期转字符(to_char())</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符转日期-to-date"><span class="nav-number">1.4.2.</span> <span class="nav-text">字符转日期(to_date())</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#数值转字符-“to-char”"><span class="nav-number">1.4.3.</span> <span class="nav-text">数值转字符(“to_char”)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字符转数值"><span class="nav-number">1.4.4.</span> <span class="nav-text">字符转数值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#通用函数"><span class="nav-number">1.5.</span> <span class="nav-text">通用函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#滤空函数（nvl-）"><span class="nav-number">1.5.1.</span> <span class="nav-text">滤空函数（nvl()）</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#增强的滤空函数-nvl2"><span class="nav-number">1.5.2.</span> <span class="nav-text">增强的滤空函数(nvl2())</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#判断两值是否相等-nullif"><span class="nav-number">1.5.3.</span> <span class="nav-text">判断两值是否相等(nullif())</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#从左到右，寻找第一个不为空的值"><span class="nav-number">1.5.4.</span> <span class="nav-text">从左到右，寻找第一个不为空的值</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#case表达式"><span class="nav-number">1.6.</span> <span class="nav-text">case表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#decode表达式"><span class="nav-number">1.7.</span> <span class="nav-text">decode表达式</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#分组函数"><span class="nav-number">2.</span> <span class="nav-text">分组函数</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#求和-SUM"><span class="nav-number">2.1.</span> <span class="nav-text">求和(SUM())</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#求匹配指定条件的行数-COUNT"><span class="nav-number">2.2.</span> <span class="nav-text">求匹配指定条件的行数(COUNT())</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#求平均数-AVG"><span class="nav-number">2.3.</span> <span class="nav-text">求平均数(AVG())</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#求最大值-MAX"><span class="nav-number">2.4.</span> <span class="nav-text">求最大值(MAX())</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#求最小值-MIN"><span class="nav-number">2.5.</span> <span class="nav-text">求最小值(MIN())</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#多个列的分组-group-by"><span class="nav-number">2.6.</span> <span class="nav-text">多个列的分组(group by)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#group-by的增强（rollup-）"><span class="nav-number">2.7.</span> <span class="nav-text">group by的增强（rollup()）</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">JiachengLai</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  


  <script type="text/javascript" src="/js/src/affix.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/schemes/pisces.js?v=5.1.4"></script>



  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

  <script type="text/javascript" src="/js/src/love.js"></script>
</body>
</html>
